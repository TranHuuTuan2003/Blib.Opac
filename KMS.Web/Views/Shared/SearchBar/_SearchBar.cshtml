@using KMS.Web.Common
@using KMS.Web.Core
@using KMS.Web.Models.JsonConfig
@inject JsonConfigCacheService<List<SearchCriteria>> SearchCriteriaService

@{
	var searchCriteria = SearchCriteriaService.GetConfig();
	var currentController = ViewContext.RouteData.Values["controller"]?.ToString();
	var currentAction = ViewContext.RouteData.Values["action"]?.ToString();

	bool isHomePage = string.Equals(currentController, "Home", StringComparison.OrdinalIgnoreCase) &&
	(string.IsNullOrEmpty(currentAction) || string.Equals(currentAction, "Index", StringComparison.OrdinalIgnoreCase));
	bool isDocument = string.Equals(currentController, "Document", StringComparison.OrdinalIgnoreCase) &&
	(string.IsNullOrEmpty(currentAction) || string.Equals(currentAction, "Detail", StringComparison.OrdinalIgnoreCase));
}

<link rel="stylesheet" href="@ConstLocation.value/css/components/search-bar/style.css" asp-append-version="true" />

@if (isDocument)
	{
	<div class="search-bar__detail-document">
		<div class="search-bar__header-detail">
			<button aria-label="Back">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M134.059 296H436c6.627 0 12-5.373 12-12v-56c0-6.627-5.373-12-12-12H134.059v-46.059c0-21.382-25.851-32.09-40.971-16.971L7.029 239.029c-9.373 9.373-9.373 24.569 0 33.941l86.059 86.059c15.119 15.119 40.971 4.411 40.971-16.971V296z" /></svg>
				<a onclick="@(isDocument ? "window.close()" : "history.back()")">Quay lại</a>
			</button>
			<div class="spacer"></div>
			<button aria-label="Bookmark" style="font-weight: normal; font-size: 12px; padding: 4px 10px;">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M0 512V48C0 21.49 21.49 0 48 0h288c26.51 0 48 21.49 48 48v464L192 400 0 512z" /></svg>
			</button>
			<button aria-label="QR Code" style="font-weight: normal; font-size: 12px; padding: 4px 10px; margin-left: 8px;">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M0 224h192V32H0v192zM64 96h64v64H64V96zm192-64v192h192V32H256zm128 128h-64V96h64v64zM0 480h192V288H0v192zm64-128h64v64H64v-64zm352-64h32v128h-96v-32h-32v96h-64V288h96v32h64v-32zm0 160h32v32h-32v-32zm-64 0h32v32h-32v-32z" /></svg>
			</button>
			<button aria-label="Share" style="margin-left: 8px;">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M352 320c-22.608 0-43.387 7.819-59.79 20.895l-102.486-64.054a96.551 96.551 0 0 0 0-41.683l102.486-64.054C308.613 184.181 329.392 192 352 192c53.019 0 96-42.981 96-96S405.019 0 352 0s-96 42.981-96 96c0 7.158.79 14.13 2.276 20.841L155.79 180.895C139.387 167.819 118.608 160 96 160c-53.019 0-96 42.981-96 96s42.981 96 96 96c22.608 0 43.387-7.819 59.79-20.895l102.486 64.054A96.301 96.301 0 0 0 256 416c0 53.019 42.981 96 96 96s96-42.981 96-96-42.981-96-96-96z" /></svg>
				<span>Chia sẻ</span>
			</button>
		</div>
	</div>
	}
	else
	{
	<div class="search-bar">
		<div class="search-bar__filterSearch" id="filterToggle">
			<label class="search-bar__filterLabel">Tìm nhanh</label>
			<svg width="12" height="7" viewBox="0 0 12 7" fill="none" xmlns="http://www.w3.org/2000/svg">
				<path d="M1 1L6.00081 5.58L11 1" stroke="#030407" stroke-width="2" stroke-linecap="round"
					  stroke-linejoin="round" />
			</svg>

			<ul class="search-bar__dropdown" id="filterDropdown">
				@foreach (var item in searchCriteria)
				{
					<li data-type="@item.key">@item.value</li>
				}
			</ul>
		</div>

		<span class="search-bar__verticalLine"></span>

		<div class="search-bar__inputSearch">
			<svg width="21" height="21" viewBox="0 0 21 21" fill="none" xmlns="http://www.w3.org/2000/svg">
				<path d="M16.0425 16.1698L19.9498 19.9498M18.6898 9.8698C18.6898 14.741 14.741 18.6898 9.8698 18.6898C4.99865 18.6898 1.0498 14.741 1.0498 9.8698C1.0498 4.99865 4.99865 1.0498 9.8698 1.0498C14.741 1.0498 18.6898 4.99865 18.6898 9.8698Z"
					  stroke="#84889A" stroke-width="2" stroke-linecap="round" />
			</svg>
			<input placeholder="Nhập tên sách, tác giả, chủ đề..." />
		</div>

		<button class="search-bar__buttonSearch search">Tìm kiếm</button>
		@if (!isHomePage)
		{
			<div class="sbar-header__advance-button" data-bs-toggle="modal" data-bs-target="#advancedSearchModal">
				<div class="vertical-line--mobile"></div>
				@SvgHelper.GetSvgIcon("input_search_advance")
				<p class="sbar-header__advance-title mt-1" style="color: #054FB0">Nâng cao</p>
			</div>

		}



		<div class="search-bar__actions--mobile">
			<a class="search-bar__clear-btn--mobile clear">
				@SvgHelper.GetSvgIcon(iconName: "xmark", true)
			</a>
			<a class="search-bar__search-btn--mobile search disabled">
				@SvgHelper.GetSvgIcon("search_input")
			</a>
			@if (!isHomePage)
			{
				<div class="vertical-line--mobile"></div>
				<a class="search-bar__clear-btn--mobile advance">
					@SvgHelper.GetSvgIcon("input_search_advance")
				</a>
			}
		</div>
	</div>
	}

