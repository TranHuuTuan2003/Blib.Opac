/**
 * @preserve
 * Plugin Name: dflip
 * Description: dflip - 3D & 2D FlipBook
 *
 * Author: Deepak Ghimire
 * Author URI: http://codecanyon.net/user/dearhive?ref=dearhive
 */
"use strict";var DFLIP=DFLIP||{},PRESENTATION=DFLIP,ThumbList=(!function(K,Y){K.version="1.7.3.5",K.PAGE_MODE={SINGLE:1,DOUBLE:2,AUTO:null},K.SINGLE_PAGE_MODE={ZOOM:1,BOOKLET:2,AUTO:null},K.CONTROLSPOSITION={HIDDEN:"hide",TOP:"top",BOTTOM:"bottom"},K.DIRECTION={LTR:1,RTL:2},K.LINK_TARGET={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4},K.CORNERS={TL:"tl",TR:"tr",BL:"bl",BR:"br",L:"l",R:"r",NONE:null},K.SOURCE_TYPE={IMAGE:"image",PDF:"pdf",HTML:"html"},K.DISPLAY_TYPE={WEBGL:"3D",HTML:"2D"},K.PAGE_SIZE={AUTO:0,SINGLE:1,DOUBLEINTERNAL:2};var e,S,y=K.defaults={webgl:!0,webglShadow:!0,soundEnable:!0,search:!1,height:"auto",autoEnableOutline:!1,autoEnableThumbnail:!1,overwritePDFOutline:!1,enableDownload:!0,duration:800,direction:K.DIRECTION.LTR,pageMode:K.PAGE_MODE.AUTO,singlePageMode:K.SINGLE_PAGE_MODE.AUTO,backgroundColor:"#fff",forceFit:!0,transparent:!1,hard:"none",openPage:1,annotationClass:"",autoPlay:!1,autoPlayDuration:5e3,autoPlayStart:!1,maxTextureSize:1600,minTextureSize:256,rangeChunkSize:524288,icons:{altnext:"ti-angle-right",altprev:"ti-angle-left",next:"ti-angle-right",prev:"ti-angle-left",end:"ti-angle-double-right",start:"ti-angle-double-left",share:"ti-sharethis",help:"ti-help-alt",more:"ti-more-alt",download:"ti-download",zoomin:"ti-zoom-in",zoomout:"ti-zoom-out",fullscreen:"ti-fullscreen",fitscreen:"ti-arrows-corner",thumbnail:"ti-layout-grid2",outline:"ti-menu-alt",close:"ti-close",search:"ti-search",doublepage:"ti-book",singlepage:"ti-file",sound:"ti-volume",facebook:"ti-facebook",google:"ti-google",twitter:"ti-twitter-alt",mail:"ti-email",play:"ti-control-play",pause:"ti-control-pause"},text:{toggleSound:"Turn on/off Sound",toggleThumbnails:"Toggle Thumbnails",toggleOutline:"Toggle Outline/Bookmark",previousPage:"Previous Page",nextPage:"Next Page",toggleFullscreen:"Toggle Fullscreen",zoomIn:"Zoom In",zoomOut:"Zoom Out",toggleHelp:"Toggle Help",singlePageMode:"Single Page Mode",doublePageMode:"Double Page Mode",downloadPDFFile:"Download PDF File",gotoFirstPage:"Goto First Page",gotoLastPage:"Goto Last Page",play:"Start AutoPlay",pause:"Pause AutoPlay",share:"Share",mailSubject:"I wanted you to see this FlipBook",mailBody:"Check out this site {{url}}",loading:"Loading"},allControls:"altPrev,pageNumber,altNext,play,outline,thumbnail,zoomIn,zoomOut,fullScreen,share,download,search,more,pageMode,startPage,endPage,sound",moreControls:"download,pageMode,startPage,endPage,sound",hideControls:"",controlsPosition:K.CONTROLSPOSITION.BOTTOM,paddingTop:30,paddingLeft:20,paddingRight:20,paddingBottom:30,enableAnalytics:!1,scrollWheel:!0,onCreate:function(e){},onCreateUI:function(e){},onFlip:function(e){},beforeFlip:function(e){},onReady:function(e){},zoomRatio:1.5,pageSize:K.PAGE_SIZE.AUTO,pdfjsSrc:"js/libs/pdf.min.js",pdfjsCompatibilitySrc:"js/libs/compatibility.js",pdfjsWorkerSrc:"js/libs/pdf.worker.min.js",threejsSrc:"js/libs/three.min.js",mockupjsSrc:"js/libs/mockup.min.js",soundFile:"sound/turn2.mp3",imagesLocation:"images",imageResourcesPath:"images/pdfjs/",cMapUrl:"cmaps/",enableDebugLog:!1,canvasToBlob:!1,enableAnnotation:!0,pdfRenderQuality:.9,textureLoadFallback:"blank",stiffness:3,backgroundImage:"",pageRatio:null,pixelRatio:window.devicePixelRatio||1,thumbElement:"div",spotLightIntensity:.22,ambientLightColor:"#fff",ambientLightIntensity:.8,shadowOpacity:.15,linkTarget:K.LINK_TARGET.BLANK,sharePrefix:"flipbook-"},E="WebKitCSSMatrix"in window||document.body&&"MozPerspective"in document.body.style,t="onmousedown"in window,a=(0 in window,navigator.userAgent),X=K.utils={drag:{left:0,right:1,none:-1},mouseEvents:t?{type:"mouse",start:"mousedown",move:"mousemove",end:"mouseup"}:{type:"touch",start:"touchstart",move:"touchmove",end:"touchend"},html:{div:"<div/>",img:"<img/>",a:"<a>",input:"<input type='text'/>"},getSharePrefix:function(){return X.getSharePrefixes()[0]},getSharePrefixes:function(){return(K.defaults.sharePrefix+",dflip-,flipbook-,dearflip-").split(",").filter(function(e){return e})},toRad:function(e){return e*Math.PI/180},isset:function(e,t){return null==e?t:e},isnull:function(e){return null==e},toDeg:function(e){return 180*e/Math.PI},transition:function(e,t){return e?t/1e3+"s ease-out":"0s none"},hasCompatibility:function(){var e=!1;return e=null!=window.dFlipLocation&&0<window.dFlipLocation.indexOf("lip-lit")?!0:e},scrollIntoView:function(e,t,n){(t=t||e.parentNode).scrollTop=e.offsetTop-t.offsetTop+(!1===n?e.offsetHeight-t.offsetHeight:0),t.scrollLeft=e.offsetLeft-t.offsetLeft},display:function(e){return e?"block":"none"},resetTranslate:function(){return b(0,0)},translateStr:function(e,t){return E?" translate3d("+e+"px,"+t+"px, 0px) ":" translate("+e+"px, "+t+"px) "},httpsCorrection:function(e){var t=window.location;return-1<t.href.indexOf("https://")&&-1<e.indexOf(t.hostname)&&(e=e.replace("http://","https://")),e=-1<t.href.indexOf("http://")&&-1<e.indexOf(t.hostname)?e.replace("https://","http://"):e},resetBoxShadow:function(){return"rgba(0, 0, 0, 0) 0px 0px 20px"},rotateStr:function(e){return" rotateZ("+e+"deg) "},bg:function(e){return"#fff"+c(e)},bgImage:function(e){return null==e||"blank"==e?"":" url("+e+")"},src:function(e){return null!=e?""+e:""},limitAt:function(e,t,n){return e<t?t:n<e?n:e},distOrigin:function(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))},distPoints:function(e,t,n,i){return Math.sqrt(Math.pow(n-e,2)+Math.pow(i-t,2))},calculateScale:function(e,t){e=u(e[0].x,e[0].y,e[1].x,e[1].y);return u(t[0].x,t[0].y,t[1].x,t[1].y)/e},getVectorAvg:function(e){return{x:e.map(function(e){return e.x}).reduce(X.sum)/e.length,y:e.map(function(e){return e.y}).reduce(X.sum)/e.length}},sum:function(e,t){return e+t},getTouches:function(e,t){return t=t||{left:0,top:0},Array.prototype.slice.call(e.touches).map(function(e){return{x:e.pageX-t.left,y:e.pageY-t.top}})},angleByDistance:function(e,t){var n=t/2,e=T(e,0,t);return e<n?v(Math.asin(e/n)):90+v(Math.asin((e-n)/n))},log:function(e){1==y.enableDebugLog&&window.console&&console.log(e)},lowerPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},nearestPowerOfTwo:function(e,t){return Math.min(t||2048,Math.pow(2,Math.ceil(Math.log(e)/Math.LN2)))},zoomStops:function(e,t,n,i,o){null==i&&(i=256),null==o&&(o=2048);o=Math.log(e/i)/Math.log(t);return i*Math.pow(t,null==n?Math.round(o):1==n?Math.ceil(o):Math.floor(o))},extendOptions:function(e,t){return Y.extend(!0,{},e,t)},getFullscreenElement:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},hasFullscreenEnabled:function(){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled},getBasePage:function(e){return 2*Math.floor(e/2)},loadResources:function(e,t,n){var i=document,o=i.createElement(e),i=i.getElementsByTagName(e)[0];o.async=!0,n&&o.addEventListener("load",function(e){n(null,e)},!1),o.src=t,i.parentNode.insertBefore(o,i)},getScriptCallbacks:[],getScript:function(e,t,i){var o,n,a=X.getScriptCallbacks[e];function s(e,t){if(null!=o&&(t||!o.readyState||/loaded|complete/.test(o.readyState))&&(o.onload=o.onreadystatechange=null,o=o=null,!t)){for(var n=0;n<a.length;n++)a[n]&&a[n](),a[n]=null;i=null}}0===Y("script[src='"+e+"']").length?((a=X.getScriptCallbacks[e]=[]).push(t),o=document.createElement("script"),n=document.body.getElementsByTagName("script")[0],o.async=1,o.setAttribute("data-cfasync",!1),null!=n?(n.parentNode.insertBefore(o,n),n=null):document.body.appendChild(o),o.addEventListener("load",s,!1),o.addEventListener("readystatechange",s,!1),o.addEventListener("complete",s,!1),i&&o.addEventListener("error",i,!1),o.src=e+("MS"==x.dom?"?"+Math.random(1):"")):a.push(t)},isHardPage:function(e,t,n,i){return null!=e&&("cover"==e?0==t||i&&1==t||t==Math.ceil(n/(i?1:2))-(i?0:1):"all"==e||(n=-1<(","+e+",").indexOf(","+(2*t+1)+","),i=-1<(","+e+",").indexOf(","+(2*t+2)+","),n)||i)},fixMouseEvent:function(e){var t,n,i;return e&&((t=e.originalEvent||e).changedTouches&&0<t.changedTouches.length?(n=Y.event.fix(e),i=t.changedTouches[0],n.clientX=i.clientX,n.clientY=i.clientY,n.pageX=i.pageX,n.touches=t.touches,n.pageY=i.pageY,n.movementX=i.movementX,n.movementY=i.movementY,n):e)},hasWebgl:function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e){return!1}}(),isBookletMode:function(e){return e.pageMode==K.PAGE_MODE.SINGLE&&e.singlePageMode==K.SINGLE_PAGE_MODE.BOOKLET},isRTLMode:function(e){return e.direction==K.DIRECTION.RTL},isMobile:(t=!1,i=a||navigator.vendor||window.opera,t=!(!/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(i)&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(i.substr(0,4)))||t),isIOS:/(iPad|iPhone|iPod)/g.test(a),isSafari:/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||safari.pushNotification).toString(),prefix:(i=window.getComputedStyle(document.documentElement,""),i=Array.prototype.slice.call(i).join("").match(/-(moz|webkit|ms)-/)[1],{dom:"WebKit|Moz|MS".match(new RegExp("("+i+")","i"))[1],lowercase:i,css:"-"+i+"-",js:i[0].toUpperCase()+i.substr(1)}),__extends:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super=t.prototype,e}},I=K.SOURCE_TYPE,m=X.drag,O=X.mouseEvents,Q=X.html,h=X.isset,R=X.toRad,v=X.toDeg,b=X.translateStr,w=X.rotateStr,c=X.bgImage,T=X.limitAt,k=X.distOrigin,u=X.distPoints,F=X.angleByDistance,J=X.log,M=X.nearestPowerOfTwo,l=X.extendOptions,C=X.getBasePage,d=X.getScript,p=X.fixMouseEvent,x=X.prefix,L=X.isBookletMode,ee=X.isRTLMode,te=X.isMobile,D=X.hasWebgl,g=X.isSafari,ne=X.isIOS,s=X.__extends;function N(e,t){return new n(this.slice(e,t))}function z(e,t){arguments.length<2&&(t=0);for(var n=0,i=e.length;n<i;++n,++t)this[t]=255&e[n]}function n(e){var t,n,i;if("number"==typeof e)for(t=[],n=0;n<e;++n)t[n]=0;else if("slice"in e)t=e.slice(0);else for(t=[],n=0,i=e.length;n<i;++n)t[n]=e[n];return t.subarray=N,(t.buffer=t).byteLength=t.length,t.set=z,"object"==typeof e&&e.buffer&&(t.buffer=e.buffer),t}window.CanvasPixelArray?"function"!=typeof window.CanvasPixelArray.prototype.set&&(window.CanvasPixelArray.prototype.set=function(e){for(var t=0,n=this.length;t<n;t++)this[t]=e[t]}):(t=!1,(t=g?(e=a.match(/Version\/([0-9]+)\.([0-9]+)\.([0-9]+) Safari\//))&&parseInt(e[1])<6:t)&&(e=window.CanvasRenderingContext2D.prototype,S=e.createImageData,e.createImageData=function(e,t){e=S.call(this,e,t);return e.data.set=function(e){for(var t=0,n=this.length;t<n;t++)this[t]=e[t]},e})),"requestAnimationFrame"in window||(window.requestAnimationFrame=window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,20)}),"undefined"!=typeof Uint8Array?(void 0===Uint8Array.prototype.subarray&&(Uint8Array.prototype.subarray=function(e,t){return new Uint8Array(this.slice(e,t))},Float32Array.prototype.subarray=function(e,t){return new Float32Array(this.slice(e,t))}),"undefined"==typeof Float64Array&&(window.Float64Array=Float32Array)):(window.Uint8Array=n,window.Float64Array=window.Float32Array=window.Uint16Array=window.Int32Array=window.Uint32Array=window.Int8Array=n);function B(r,l){function c(e){return isNaN(e)?e=l.target._activePage:e<1?e=1:e>l.target.pageCount&&(e=l.target.pageCount),e}var t,e="df-ui",n="df-ui-wrapper",i=e+"-btn",o=ee(l.target),d=l.ui=Y(Q.div,{class:e}),a=l.options,s=(d.dispose=function(){r.find("."+i).each(function(){Y(this).off()}),b.off(),s.off(),u.off(),h.off(),p.off(),g.off(),f.off(),m.off(),w.off(),x.off(),L.off(),S.off(),I.off(),T.off(),z.off(),B.off(),A.off(),_.off(),j.off(),U.off(),E.remove(),v.remove(),u.remove(),s.remove(),p.remove(),d.shareBox&&(d.shareBox.dispose&&d.shareBox.dispose(),d.shareBox=null),document.removeEventListener("keyup",N,!1),window.removeEventListener("click",P,!1),d.update=null,l=null},d.next=Y(Q.div,{class:i+" "+e+"-next "+a.icons.next,title:o?a.text.previousPage:a.text.nextPage,html:"<span>"+a.text.nextPage+"</span>"}).on("click",function(){l.next()})),u=d.prev=Y(Q.div,{class:i+" "+e+"-prev "+a.icons.prev,title:o?a.text.nextPage:a.text.previousPage,html:"<span>"+a.text.previousPage+"</span>"}).on("click",function(){l.prev()}),h=Y(Q.div,{class:i+" "+e+"-play "+a.icons.play,title:a.text.play,html:"<span>"+a.text.play+"</span>"}).on("click",function(){var e=Y(this);l.setAutoPlay(!e.hasClass(a.icons.pause))}),p=(1==a.autoPlay&&(d.play=h,l.setAutoPlay(a.autoPlayStart)),Y(Q.div,{class:n+" "+e+"-zoom"})),g=d.zoomIn=Y(Q.div,{class:i+" "+e+"-zoomin "+a.icons.zoomin,title:a.text.zoomIn,html:"<span>"+a.text.zoomIn+"</span>"}).on("click",function(){l.zoom(1),d.update(),l.target.startPoint&&l.target.pan&&l.target.pan(l.target.startPoint)}),f=d.zoomOut=Y(Q.div,{class:i+" "+e+"-zoomout "+a.icons.zoomout,title:a.text.zoomOut,html:"<span>"+a.text.zoomOut+"</span>"}).on("click",function(){l.zoom(-1),d.update(),l.target.startPoint&&l.target.pan&&l.target.pan(l.target.startPoint)}),m=(p.append(g).append(f),d.pageNumber=Y(Q.div,{class:i+" "+e+"-page"}).on("change",function(){var e=parseInt(d.pageInput.val(),10),e=c(e);l.gotoPage(e)}).on("keyup",function(e){13==e.keyCode&&(e=parseInt(d.pageInput.val(),10),(e=c(e))!==c(l.target._activePage||l._activePage))&&l.gotoPage(e)})),v=(d.pageInput=Y('<input id="df_book_page_number" type="text"/>').appendTo(m),d.pageLabel=Y('<label for="df_book_page_number"/>').appendTo(m),Y(Q.div,{class:n+" "+e+"-size"})),b=Y(Q.div,{class:i+" "+e+"-help "+a.icons.help,title:a.text.toggleHelp,html:"<span>"+a.text.toggleHelp+"</span>"}).on("click",function(){}),w=d.sound=Y(Q.div,{class:i+" "+e+"-sound "+a.icons.sound,title:a.text.toggleSound,html:"<span>"+a.text.toggleSound+"</span>"}).on("click",function(){a.soundEnable=!a.soundEnable,d.updateSound()}),x=(d.updateSound=function(){0==a.soundEnable||"false"==a.soundEnable?w.addClass("disabled"):w.removeClass("disabled")},d.updateSound(),"string"==typeof a.source&&1==a.search&&(t=d.search=Y(Q.div,{class:i+" "+e+"-search "+a.icons.search}).on("click",function(e){t.hasClass("df-active")||(Y(this).addClass("df-active"),e.stopPropagation())}),window.addEventListener("click",function(e){d.search.removeClass("df-active")},!1),y=Y(Q.div,{class:"search-container"}),t.append(y)),d.more=Y(Q.div,{class:i+" "+e+"-more "+a.icons.more}).on("click",function(e){x.hasClass("df-active")||(Y(this).addClass("df-active"),e.stopPropagation())}));function P(e){x.removeClass("df-active")}window.addEventListener("click",P,!1);var y,C=Y(Q.div,{class:"more-container"});x.append(C),1==a.enableDownload&&(y=i+" "+e+"-download "+a.icons.download,(d.download=Y('<a download target="_blank" class="'+y+'"><span>'+a.text.downloadPDFFile+"</span></a>")).attr("href",a.source).attr("title",a.text.downloadPDFFile)),X.hasFullscreenEnabled()||r.addClass("df-custom-fullscreen"),d.switchFullscreen=function(){X.getFullscreenElement();var e=l.container[0];1!=d.isFullscreen?(l.container.addClass("df-fullscreen"),e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen(),d.isFullscreen=!0):(l.container.removeClass("df-fullscreen"),d.isFullscreen=!1,document.exitFullscreen?document.fullscreenElement&&document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.fullscreenElement&&document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()),X.hasFullscreenEnabled()||setTimeout(function(){l.resize()},50)};for(var L=d.fullScreen=Y(Q.div,{class:i+" "+e+"-fullscreen "+a.icons.fullscreen,title:a.text.toggleFullscreen,html:"<span>"+a.text.toggleFullscreen+"</span>"}).on("click",d.switchFullscreen),S=d.fit=Y(Q.div,{class:i+" "+e+"-fit "+a.icons.fitscreen}).on("click",function(){Y(this).toggleClass("df-button-fit-active")}),E=(v.append(L),Y(Q.div,{class:n+" "+e+"-controls"})),I=(d.shareBox=new K.Share(r,a),d.share=Y(Q.div,{class:i+" "+e+"-share "+a.icons.share,title:a.text.share,html:"<span>"+a.text.share+"</span>"}).on("click",function(e){1==d.shareBox.isOpen?d.shareBox.close():(d.shareBox.update(l.getURLHash()),d.shareBox.show())})),T=d.startPage=Y(Q.div,{class:i+" "+e+"-start "+(o?a.icons.end:a.icons.start),title:a.text.gotoFirstPage,html:"<span>"+a.text.gotoFirstPage+"</span>"}).on("click",function(){l.start()}),z=d.endPage=Y(Q.div,{class:i+" "+e+"-end "+(o?a.icons.start:a.icons.end),title:a.text.gotoLastPage,html:"<span>"+a.text.gotoLastPage+"</span>"}).on("click",function(){l.end()}),B=d.pageMode=Y(Q.div,{class:i+" "+e+"-pagemode "+a.icons.singlepage,html:"<span>"+a.text.singlePageMode+"</span>"}).on("click",function(){var e=Y(this);l.setPageMode(!e.hasClass(a.icons.doublepage))}),A=(l.setPageMode(l.target.pageMode==K.PAGE_MODE.SINGLE),d.altPrev=Y(Q.div,{class:i+" "+e+"-prev "+e+"-alt "+a.icons.prev,title:o?a.text.nextPage:a.text.previousPage,html:"<span>"+a.text.previousPage+"</span>"}).on("click",function(){l.prev()})),_=d.altNext=Y(Q.div,{class:i+" "+e+"-next "+e+"-alt "+a.icons.next,title:o?a.text.previousPage:a.text.nextPage,html:"<span>"+a.text.nextPage+"</span>"}).on("click",function(){l.next()}),j=d.thumbnail=Y(Q.div,{class:i+" "+e+"-thumbnail "+a.icons.thumbnail,title:a.text.toggleThumbnails,html:"<span>"+a.text.toggleThumbnails+"</span>"}).on("click",function(){var e=Y(this);l.target.thumbContainer?l.target.thumbContainer.toggleClass("df-sidemenu-visible"):l.contentProvider.initThumbs(),e.toggleClass("df-active"),e.hasClass("df-active")&&e.siblings(".df-active").trigger("click"),d.update(!0)}),U=d.outline=Y(Q.div,{class:i+" "+e+"-outline "+a.icons.outline,title:a.text.toggleOutline,html:"<span>"+a.text.toggleOutline+"</span>"}).on("click",function(){var e,t=Y(this);l.target.outlineContainer&&(e=l.target.outlineContainer,t.toggleClass("df-active"),e.toggleClass("df-sidemenu-visible"),t.hasClass("df-active")&&t.siblings(".df-active").trigger("click"),d.update(!0))}),k=a.allControls.replace(/ /g,"").split(","),O=","+a.moreControls.replace(/ /g,"")+",",R=","+a.hideControls.replace(/ /g,"")+",",F=(ne&&te&&(R+=",fullScreen,"),O.split(","),0);F<k.length;F++){var M,D=k[F];R.indexOf(","+D+",")<0&&null!=(M=d[D])&&"object"==typeof M&&(-1<O.indexOf(","+D+",")&&"more"!==D&&"pageNumber"!==D?C:E).append(M)}r.append(E).append(u).append(s).append(p);var H=16,W=17,V=18,G=39,q=37,Z=27;function N(e){switch(e.keyCode){case Z:1==d.isFullscreen?d.fullScreen.trigger("click"):window.dfLightBox&&window.dfActiveLightBoxBook&&window.dfLightBox.closeButton.trigger("click");break;case H:0;break;case W:0;break;case V:0;break;case q:l.prev();break;case G:l.next()}}document.addEventListener("keyup",N,!1),d.update=function(e){J("ui update");var t=l.target,n=c(t._activePage||l._activePage),i=t.pageCount||l.pageCount,o=t.direction==K.DIRECTION.RTL,a=1==n||0==n,s=n==i;d.next.show(),d.prev.show(),d.altNext.removeClass("disabled"),d.altPrev.removeClass("disabled"),(a&&!o||s&&o)&&(d.prev.hide(),d.altPrev.addClass("disabled")),(s&&!o||a&&o)&&(d.next.hide(),d.altNext.addClass("disabled")),d.pageInput.val(n),d.pageLabel.html(n+"/"+i),0<r.find(".df-sidemenu-visible").length?r.addClass("df-sidemenu-open"):r.removeClass("df-sidemenu-open"),1==e&&l.resize(),t.contentProvider.zoomScale==t.contentProvider.maxZoom?d.zoomIn.addClass("disabled"):d.zoomIn.removeClass("disabled"),1==t.contentProvider.zoomScale?d.zoomOut.addClass("disabled"):d.zoomOut.removeClass("disabled")},null!=l.target&&(l.target.ui=d),null!=a.onCreateUI&&a.onCreateUI(l)}var f=null;function A(){function e(e){var s=this,t=(u.call(this,e=e||{}),s.options=e,s.canvas=Y(s.renderer.domElement).addClass("df-3dcanvas"),s.container=e.container,s.container.append(s.canvas),s.type="PreviewStage",s.mouse=new THREE.Vector2,s.raycaster=new THREE.Raycaster,s.camera.position.set(0,20,600),s.camera.lookAt(new THREE.Vector3(0,0,0)),s.spotLight.position.set(-220,330,550),s.spotLight.castShadow=!te&&e.webglShadow,s.spotLight.shadow&&(s.spotLight.shadow.bias=-8e-4),s.spotLight.intensity=h(e.spotLightIntensity,y.spotLightIntensity),s.ambientLight.color=new THREE.Color(h(e.ambientLightColor,y.ambientLightColor)),s.ambientLight.intensity=h(e.ambientLightIntensity,y.ambientLightIntensity),new THREE.ShadowMaterial),n=(t.opacity=h(e.shadowOpacity,y.shadowOpacity),s.ground.material=t,s.ground.position.z=-2,s.orbitControl.maxAzimuthAngle=0,s.orbitControl.minAzimuthAngle=0,s.orbitControl.minPolarAngle=Math.PI/2,s.orbitControl.maxPolarAngle=2.2,s.orbitControl.mouseButtons.ORBIT=THREE.MOUSE.RIGHT,s.orbitControl.mouseButtons.PAN=-1,s.orbitControl.maxDistance=5e3,s.orbitControl.minDistance=50,s.orbitControl.noZoom=!0,s.selectiveRendering=!0,s.orbitControl.zoomSpeed=5,s.orbitControl.keyPanSpeed=0,s.orbitControl.center.set(0,0,0),s.orbitControl.update(),s.swipe_threshold=te?15:20,s.cssRenderer=new THREE.CSS3DRenderer),i=(Y(n.domElement).css({position:"absolute",top:0,pointerEvents:"none"}).addClass("df-3dcanvas df-csscanvas"),s.container[0].appendChild(n.domElement),s.cssScene=new THREE.Scene),e=document.createElement("div"),t=(e.className="df-page-content df-page-content-left",document.createElement("div")),e=(t.className="df-page-content df-page-content-right",i.divLeft=new THREE.CSS3DObject(e)),t=i.divRight=new THREE.CSS3DObject(t);function o(){s.renderRequestPending=!0}i.add(e),i.add(t),s.resizeCallback=function(){n.setSize(s.canvas.width(),s.canvas.height())},window.addEventListener(O.move,o,!1),window.addEventListener("keyup",o,!1),s.dispose=function(){s.clearChild(),s.render(),window.removeEventListener(O.move,o,!1),1==s.options.scrollWheel&&(s.container[0].removeEventListener("mousewheel",a,!1),s.container[0].removeEventListener("DOMMouseScroll",a,!1)),window.removeEventListener("keyup",o,!1),s.renderer.domElement.removeEventListener("mousemove",r,!1),s.renderer.domElement.removeEventListener("touchmove",r,!1),s.renderer.domElement.removeEventListener("mousedown",l,!1),s.renderer.domElement.removeEventListener("touchstart",l,!1),s.renderer.domElement.removeEventListener("mouseup",d,!1),s.renderer.domElement.removeEventListener("touchend",d,!1),s.canvas.remove(),n.domElement.parentNode.removeChild(n.domElement),n=null,s.renderCallback=null,s.renderCallback=null,s.orbitControl.dispose(),s.orbitControl=null,s.renderer.dispose(),s.cancelRAF()},s.renderCallback=function(){0<TWEEN.getAll().length&&(s.renderRequestPending=!0),TWEEN.update(),n.render(i,s.camera)};var a=function(e){var t,n=0;null!=e.wheelDelta?n=e.wheelDelta:null!=e.detail&&(n=-e.detail),n&&(t=s.previewObject.contentProvider.zoomScale,(0<n&&1==t||n<0&&1<t)&&e.preventDefault(),s.previewObject.zoom(0<n?1:-1)),o()},r=function(e){var t,n;s.renderRequestPending=!0,e=p(e),s.isMouseDown&&0!=e.movementX&&0!=e.movementY&&(s.isMouseMoving=!0),null!=e.touches&&2==e.touches.length&&null!=s.startTouches?(s.zoomDirty=!0,t=X.getVectorAvg(X.getTouches(e,s.container.offset())),n=X.calculateScale(s.startTouches,X.getTouches(e)),s.lastScale,s.previewObject.contentProvider.zoomScale,t.x,t.y,s.camera.position.z=s.originalZ/n,s.lastScale=n,s.lastZoomCenter=t,e.preventDefault()):1==s.isMouseDown&&1==s.previewObject.contentProvider.zoomScale&&(n=e.pageX-s.lastPos,performance.now(),s.lastTime,Math.abs(n)>s.swipe_threshold&&(n<0?s.target.next():s.target.prev(),e.preventDefault(),s.isMouseDown=!1),s.lastPos=e.pageX,s.lastTime=performance.now())},l=function(e){null!=(e=p(e)).touches&&2==e.touches.length&&null==s.startTouches&&(s.startTouches=X.getTouches(e),s.lastScale=1,s.originalZ=+s.camera.position.z),document.activeElement.blur(),s.mouseValue=e.pageX+","+e.pageY,s.isMouseMoving=!1,s.isMouseDown=!0,s.lastPos=e.pageX,s.lastTime=performance.now()},c=function(e){if(s.isMouseDown=!1,0!==e.button)return this;var t=e.pageX+","+e.pageY;if(!s.isMouseMoving&&t==s.mouseValue){e=e||window.event,e=Y.event.fix(e);var t=s.mouse,n=s.raycaster,i=(t.x=e.offsetX/s.canvas.innerWidth()*2-1,t.y=1-e.offsetY/s.canvas.innerHeight()*2,n.setFromCamera(t,s.camera),n.intersectObjects(s.target instanceof MOCKUP.Bundle?s.target.children:[s.target],!0));if(0<i.length){for(var o,a=0;o=null!=i[a]?i[a].object:null,a++,(o instanceof THREE.BoxHelper||!(o instanceof MOCKUP.Paper)||1==o.isFlipping)&&a<i.length;);null==o.userData.object&&(90<o.angles[1]?1!=o.isEdge&&s.target.next():1!=o.isEdge&&s.target.prev())}}},d=function(e){null!=(e=p(e)).touches&&0==e.touches.length&&(s.previewObject.contentProvider.zoomScale,1==s.zoomDirty&&(s.previewObject.contentProvider.zoomScale=X.limitAt(s.previewObject.contentProvider.zoomScale*s.lastScale,1,s.previewObject.contentProvider.maxZoom),s.previewObject.zoomValue=+s.previewObject.contentProvider.zoomScale,s.previewObject.resize(),s.zoomDirty=!1),s.lastScale=null,s.startTouches=null),null!=e.touches&&1<e.touches.length||c(e)};return s.renderer.domElement.addEventListener("mousemove",r,!1),s.renderer.domElement.addEventListener("touchmove",r,!1),s.renderer.domElement.addEventListener("mousedown",l,!1),s.renderer.domElement.addEventListener("touchstart",l,!1),s.renderer.domElement.addEventListener("mouseup",d,!1),s.renderer.domElement.addEventListener("touchend",d,!1),1==s.options.scrollWheel&&(s.container[0].addEventListener("mousewheel",a,!1),s.container[0].addEventListener("DOMMouseScroll",a,!1)),Y(s.renderer.domElement).css({display:"block"}),Y(window).trigger("resize"),this}u=MOCKUP.Stage,s(e,u),e.prototype.width=function(){return this.container.width()},e.prototype.height=function(){return this.container.height()},f=e,MOCKUP.PreviewStage=f,s(i,n=MOCKUP.FlexBoxPaper),i.prototype.tween=function(e,t){var n=this,i=1e-5,o=(n.originalStiff=n.stiffness,n.newStiffness),a=L(n.parent),s=t-e,r=90<e,l=n.parent.direction==K.DIRECTION.RTL;n.init={angle:e,angle2:e<90?0:180,stiff:n.originalStiff,index:r&&!l||!r&&l?1:0},n.first={angle:e+s/4,angle2:90,stiff:n.originalStiff,index:r&&!l||!r&&l?1:.25},n.mid={angle:e+2*s/4,angle2:e<90?135:45,stiff:n.newStiffness,index:.5},n.mid2={angle:e+3*s/4,angle2:e<90?180:0,stiff:n.newStiffness,index:r&&!l||!r&&l?.25:1},n.end={angle:t,angle2:e<90?180:0,stiff:n.newStiffness,index:r&&!l||!r&&l?0:1},n.isFlipping=!0;a&&(!r&&!l||r&&l)&&(n.material.materials[5].opacity=n.material.materials[4].opacity=0,n.castShadow=!1),n.currentTween=new TWEEN.Tween(n.init).to({angle:[n.first.angle,n.mid.angle,n.mid2.angle,n.end.angle],angle2:[n.first.angle2,n.mid.angle2,n.mid2.angle2,n.end.angle2],stiff:[n.first.stiff,n.mid.stiff,n.mid2.stiff,n.end.stiff],index:[n.first.index,n.mid.index,n.mid2.index,n.end.index]},n.parent.duration).onUpdate(function(e){var t;t=this,n.angles[1]=t.angle,n.angles[4]=n.isHard?t.angle:t.angle2,1==n.isHard?n.stiffness=0:(n.stiffness=t.stiff/(o+i)*(n.newStiffness+i),n.stiffness=isNaN(n.stiffness)?0:t.stiff),a&&(n.material.materials[5].opacity=n.material.materials[4].opacity=t.index,n.castShadow=.5<t.index),n.updateAngle(!0)}).easing(TWEEN.Easing.Sinusoidal.Out).onComplete(function(e){n.stiffness=n.newStiffness,n.updateAngle(),n.material.materials[5].opacity=n.material.materials[4].opacity=1,n.castShadow=!0,n.isFlipping=!1,n.parent&&n.parent.refresh&&n.parent.refresh()}).start()};var u,n,t=i;function i(e,t){(e=e||{}).folds=1,n.call(this,e,t),this.angle=0,this.isFlipping=!1,this.material.materials[5].transparent=!0,this.material.materials[4].transparent=!0,this.type="BookPaper"}MOCKUP.BookPaper=t;s(a,o=MOCKUP.Bundle),a.prototype.getPageByNumber=function(e){e=L(this)?ee(this)?e+1:e:Math.floor((e-1)/2);return this.getObjectByName(e.toString())},a.prototype.isPageHard=function(e){return X.isHardPage(this.hardConfig,e,this.pageCount)},a.prototype.activePage=function(e){if(null==e)return this._activePage;this.gotoPage(e)},a.prototype.gotoPage=function(e){e=parseInt(e,10),this._activePage=e,1==this.autoPlay&&this.previewObject.setAutoPlay(this.autoPlay),this.updatePage(e),this&&this.thumblist&&this.thumblist.review&&this.thumblist.review()},a.prototype.moveBy=function(e){e=this._activePage+e,e=T(e,this.startPage,this.endPage);1!=this.firstFlipped&&(this.previewObject.analytics({eventAction:"First Page Flip",options:this.previewObject.options}),this.firstFlipped=!0),this.gotoPage(e)},a.prototype.next=function(e){null==e&&(e=this.direction==K.DIRECTION.RTL?-this.pageMode:this.pageMode),this.moveBy(e)},a.prototype.prev=function(e){null==e&&(e=this.direction==K.DIRECTION.RTL?this.pageMode:-this.pageMode),this.moveBy(e)},a.prototype.updateAngle=function(){for(var e=this.angles[1],t=this.angles[4]-e,n=this.stackCount,i=0;i<n;i++){var o=this.children[i];o.angles[1]=e+i*t/(100*n),o.stiffness=this.stiffness,o.updateAngle()}},a.prototype.refresh=function(){this.updatePage(this._activePage),null!=this.flipCallback&&this.flipCallback()},a.prototype.updatePage=function(e){var t=this.direction==K.DIRECTION.RTL,n=L(this),i=(C(e),n?1:2),o=(e=Math.floor(e/i),t&&(e=Math.ceil(this.pageCount/i)-e),this.oldBaseNumber||0),a=this.pageCount/i,s=this.stackCount,r=n?0:(.5-Math.abs(a/2-e)/a)/this.stiffness,l=Math.floor(s/2),c=!1;e<o?(this.children[s-1].skipFlip=c=!0,this.children.unshift(this.children.pop())):o<e&&(this.children[0].skipFlip=!0,this.children.push(this.children.shift()));for(var i=5/a,d=i*e/2,u=i*(a-e)/2,h=d<u?u:d,p=0;p<s;p++){var g,f=this.children[p],m=(f.color,f.angles[1]),v=e-l+p,b=(t&&(v=n?this.pageCount-v:Math.ceil(this.pageCount/2)-v-1),f.isHard=this.isPageHard(v)),w=f.name,x=(f.isEdge=!1,0==p?f.depth=d<.4?.4:d:p==s-1?f.depth=u<.4?.4:u:(f.depth=.4,f.isEdge=!1),1==f.isFlipping&&(f.depth=.4),f.position.x=0,.02*p),P=180-.02*(p-l)+.02*p,P=(p<l?(f.newStiffness=b||0==this.stiffness?0:r/(e/a)/4,g=x,f.position.z=h-.4*(-p+l),1==c&&(f.position.z-=.4)):(g=P,f.newStiffness=b||0==this.stiffness?0:r/(Math.abs(a-e)/a)/4,f.position.z=h-.4*(-s+p+l+1)-f.depth),0==f.isFlipping&&(20<Math.abs(m-g)&&0==f.skipFlip?(f.depth=.4,x=f.stiffness,x=g<m?r/(Math.abs(a-e)/a)/4:r/(e/a)/4,f.position.z+=.4,f.stiffness=isNaN(x)?f.stiffness:x,f.updateAngle(!0),f.targetStiffness=b?0:p<e?r/(Math.abs(a-e)/a)/4:r/(e/a)/4,f.targetStiffness=b?0:isNaN(f.targetStiffness)?f.stiffness:f.targetStiffness,f.isFlipping=!0,f.tween(m,g),null!=this.preFlipCallback&&this.preFlipCallback()):(f.skipFlip=!1,f.newStiffness=isNaN(f.newStiffness)?0:f.newStiffness,f.angles[1]==g&&f.stiffness==f.newStiffness&&f.depth==f.oldDepth||(f.angles[1]=f.angles[4]=g,f.stiffness=f.newStiffness,f.updateAngle(!0)))),f.visible=n?t?p<l||f.isFlipping:l<=p||f.isFlipping:0<=v&&v<a||n&&v==a,null!=this.requestPage&&(f.name=v.toString(),f.name!=w)&&(f.textureLoaded=!1,f.frontImage(y.textureLoadFallback),f.frontPageStamp="-1",f.frontTextureLoaded=!1,f.thumbLoaded=!1,f.backImage(y.textureLoadFallback),f.backPageStamp="-1",f.backTextureLoaded=!1,this.requestPage()),f.oldDepth=f.depth,(Math.abs(f.geometry.boundingBox.max.x)<Math.abs(f.geometry.boundingBox.min.x)?f.geometry.boundingBox.max:f.geometry.boundingBox.min).x);f.position.x=1==f.isEdge&&0==f.isFlipping?p<l?P:-P:0}this.oldBaseNumber=e,null!=this.updatePageCallback&&this.updatePageCallback()},a.prototype.createCover=function(e){e.width=2*e.width,this.cover=new MOCKUP.BiFold(e),this.add(this.cover)},a.prototype.createStack=function(e){for(var t="red,green,blue,yellow,orange,black".split(","),n=0;n<this.stackCount;n++){e.angles=[,this.stackCount-n],e.stiffness=(this.stackCount-n)/100;var i=new MOCKUP.BookPaper(e);i.angles[1]=180,i.index=n,i.updateAngle(),i.textureReady=!1,i.textureRequested=!1,this.add(i),i.color=t[n],i.position.z=-1*n}},a.prototype.shininess=function(e){if(null==e)return this.mainObject.shininess();this.mainObject.shininess(e)},a.prototype.bumpScale=function(e){if(null==e)return this.mainObject.bumpScale();this.mainObject.bumpScale(e)},a.prototype.frontImage=function(e){if(null==e)return this.mainObject.frontImage();this.mainObject.frontImage(e)},a.prototype.backImage=function(e){if(null==e)return this.mainObject.backImage();this.mainObject.backImage(e)};var o,t=a;function a(e,t){(e=e||{}).segments=e.segments||50,this.pageCount=e.pageCount,this.height=e.height,this.width=e.width,this.direction=e.direction||K.DIRECTION.LTR,this.startPage=1,this.endPage=this.pageCount,this.stackCount=e.stackCount||6,this.materials=[],o.call(this,e,t),this.angles=[0,0,0,0,0,0],this.stiffness=null==e.stiffness?1.5:e.stiffness,this.hardConfig=e.hard,this._activePage=e.openPage||this.startPage,this.createStack(e),this.pageMode=e.pageMode||(te||this.pageCount<=2?K.PAGE_MODE.SINGLE:K.PAGE_MODE.DOUBLE),this.singlePageMode=e.singlePageMode||(te?K.SINGLE_PAGE_MODE.BOOKLET:K.SINGLE_PAGE_MODE.ZOOM),this.type="Book"}MOCKUP.Book=t}_.prototype={start:function(){this.target.gotoPage(this.target.startPage)},end:function(){this.target.gotoPage(this.target.endPage)},next:function(){},prev:function(){},getPageTextContent:function(e){return this.contentProvider.pdfDocument.getPage(e+1).then(function(e){return e.getTextContent({normalizeWhitespace:!0})})},calculateSize:function(e,t,n,i,o,a,s,r){var l,c,t=t-o,o=e-i,r=Math.ceil(r?t:t/2),t=r/s,d=null,o=(a?e=d=Math.min(t,n-i):d=Math.min(o,n-i),d<t);return o?(c=d,l=Math.floor(c*s)):(l=r,c=Math.ceil(r/s)),{stageHeight:e=a?Math.max(c+i,320):e,isWide:o,height:c,width:l}},zoom:function(e){this.pendingZoom=!0,this.zoomDelta=e,this.resize(),this.ui&&this.ui.update()},resize:function(){var e,t,n,i,o,a,s,r,l,c,d,u,h,p,g,f,m,v,b,w,x,P,y,C,L,S,E=this;null!=E.target&&null!=E.target.ui&&null!=E.target.contentProvider&&null!=E.target.contentProvider.viewport&&null!=E.target.stage&&(this.ui&&1==this.ui.isFullscreen&&1==X.hasFullscreenEnabled()&&null==X.getFullscreenElement()&&this.ui.switchFullscreen(),m=E.container,f=E.options,t=(e=E.target).stage,a=(n=e.contentProvider).pageRatio,i=ee(e),L="css"!==e.mode,n.pageRatio,v=1!=this.ui.isFullscreen&&"auto"===f.height,s=m.hasClass("df-sidemenu-open")?220:0,C=this.target.pageMode==K.PAGE_MODE.SINGLE,(p=m.width())<400?E.container.addClass("df-xs"):E.container.removeClass("df-xs"),l=m.find(".df-ui-controls").height(),r=f.paddingTop+(f.controlsPosition==K.CONTROLSPOSITION.TOP?l:0),d=f.paddingRight,l=f.paddingBottom+(f.controlsPosition==K.CONTROLSPOSITION.BOTTOM?l:0),c=f.paddingLeft,u=(r=isNaN(r)?0:T(r,0,r))+(l=isNaN(l)?0:T(l,0,l)),h=(c=isNaN(c)?0:T(c,0,c))+(d=isNaN(d)?0:T(d,0,d)),p=p-s,m.height(f.height),f=Y(window).height(),g=Math.min(m.height(),f),b=E.calculateSize(g,p,f,u,h,v,a,C),g=f=(v?E.calculateSize(g,p+s,f,u,h,v,a,C):b).stageHeight,m.height(g),v=p-h,b=(f=g)-u,m=Math.floor(C?v:v/2),(S=b<(v=Math.floor(m/a)))&&(m=(v=b)*a),b=n.maxZoom=n.zoomViewport.height/v,null==E.zoomValue&&(E.zoomValue=1),null==n.zoomScale&&(n.zoomScale=1),1==E.pendingZoom&&null!=E.zoomDelta&&(E.zoomDelta,Math.max(v,m),E.zoomValue=0<E.zoomDelta?E.zoomValue*E.options.zoomRatio:E.zoomValue/E.options.zoomRatio,E.zoomValue=T(E.zoomValue,1,b),1==E.zoomValue?n.zoomScale=1:n.zoomScale=T(E.zoomValue,1,b)),a=n.zoomScale,n.checkViewportSize(m,v,a),n.contentSourceType==I.PDF&&(m=n.imageViewport.width/a,v=n.imageViewport.height/a),1!=n.zoomScale&&this.target.container.addClass("df-zoom-enabled"),b=e.zoomWidth=Math.floor(m*a),w=e.zoomHeight=Math.floor(v*a),x=2*b,L?(L=w/e.height,S=S?a*(v+u)/L:a*(m*(C?1:2)+h)/L/(p/f),t.resizeCanvas(p,f),o=1/(2*Math.tan(Math.PI*t.camera.fov*.5/180)/(S/a))+2.2,t.camera.updateProjectionMatrix(),t.renderRequestPending=!0,P=(r-l)*(e.height/v)/a/2,y=1==n.zoomScale,t.camera.position.z!==o&&1==E.pendingZoom?(null!=E.zoomTween&&E.zoomTween.stop(),E.zoomTween=new TWEEN.Tween({campos:t.camera.position.z,otx:t.orbitControl.target.x,oty:t.orbitControl.target.y,otz:t.orbitControl.target.z}).delay(0).to({campos:o,otx:0,oty:P,otz:0},100).onUpdate(function(){t.camera.position.z=this.campos,y&&(t.camera.position.y=this.oty,t.orbitControl.target=new THREE.Vector3(this.otx,this.oty,this.otz)),t.orbitControl.update()}).easing(TWEEN.Easing.Linear.None).onComplete(function(){t.camera.position.z=o,1==n.zoomScale&&(t.camera.position.set(0,P,o),t.orbitControl.target=new THREE.Vector3(0,P,0)),t.orbitControl.update()}).start()):(1==n.zoomScale&&(t.camera.position.set(0,P,o),t.orbitControl.target=new THREE.Vector3(0,P,0)),t.orbitControl.update()),t.orbitControl.update(),t.orbitControl.mouseButtons.ORBIT=1!=a?-1:THREE.MOUSE.RIGHT,t.orbitControl.mouseButtons.PAN=1!=a?THREE.MOUSE.LEFT:-1):(e.pageWidth=Math.round(m),e.fullWidth=2*e.pageWidth,e.height=Math.round(v),C=e.shiftHeight=Math.round(T((w-f+u)/2,0,w)),L=e.shiftWidth=Math.round(T((x-p+h)/2,0,x)),1==a&&(e.left=0,e.top=0),e.stage.css({top:-C,bottom:-C,right:(i?s:0)-L,left:(i?0:s)-L,paddingTop:r,paddingRight:d,paddingBottom:l,paddingLeft:c,transform:"translate3d("+e.left+"px,"+e.top+"px,0)"}),e.stageHeight=t.height(),e.wrapper.css({width:x,height:w,marginTop:0<g-w-u?(g-u-w)/2:0}),S=Math.floor(k(m,v)*a),e.stage.find(".df-page-wrapper").width(S).height(S),e.stage.find(".df-book-page, .df-page-front , .df-page-back, .df-page-fold-inner-shadow").height(w).width(b)),E.checkCenter({type:"resize"}),1==n.zoomScale&&this.target.container.removeClass("df-zoom-enabled"),e.thumblist&&e.thumblist.reset(Y(e.thumblist.container).height()),E.pendingZoom=!1)},playSound:function(){try{this.options&&1==this.options.soundEnable&&(this.sound.currentTime=0,this.sound.play())}catch(e){}},setPageMode:function(e){1==e?(this.ui.pageMode.addClass(this.options.icons.doublepage),this.ui.pageMode.html("<span>"+this.options.text.doublePageMode+"</span>"),this.ui.pageMode.attr("title",this.options.text.doublePageMode),this.target.pageMode=K.PAGE_MODE.SINGLE):(this.ui.pageMode.removeClass(this.options.icons.doublepage),this.ui.pageMode.html("<span>"+this.options.text.singlePageMode+"</span>"),this.ui.pageMode.attr("title",this.options.text.singlePageMode),this.target.pageMode=K.PAGE_MODE.DOUBLE),this.target&&this.target.singlePageMode==K.SINGLE_PAGE_MODE.BOOKLET&&this.target.reset(),this.resize()},setAutoPlay:function(e){var t;this.options.autoPlay&&(t=(e=1==e)?this.options.text.pause:this.options.text.play,this.ui.play.toggleClass(this.options.icons.pause,e),this.ui.play.html("<span>"+t+"</span>"),this.ui.play.attr("title",t),clearInterval(this.autoPlayTimer),e&&(this.autoPlayTimer=setInterval(this.autoPlayFunction,this.options.autoPlayDuration)),this.target.autoPlay=e)},height:function(e){if(null==e)return this.container.height();this.options.height=e,this.container.height(e),this.resize()},checkCenter:function(e){e=null==e?{}:e,this.centerType=this.centerType||"start";var t,n=this.target,i=0,o=0,a=0,s=X.getBasePage(n._activePage),r=n._activePage%2==0,l=n.direction==K.DIRECTION.RTL,c=n.pageMode==K.PAGE_MODE.SINGLE,d=c&&n.singlePageMode==K.SINGLE_PAGE_MODE.BOOKLET,u=n.stage.width();"css"==n.mode?(t=n.wrapper.width(),i=Math.max((t-u)/2,0),o=-t/4,a=t/4,0==s||d?(n.wrapper.css({left:c?l?a-i:o-i:l?a:o}),n.shadow.css({width:"50%",left:l?0:"50%",transitionDelay:""})):s==n.pageCount?(n.wrapper.css({left:c?l?o-i:a-i:l?o:a}),n.shadow.css({width:"50%",left:l?"50%":0,transitionDelay:""})):(n.wrapper.css({left:c?l?r?o-i:a-i:r?a-i:o-i:0}),n.shadow.css({width:"100%",left:0,transitionDelay:parseInt(n.duration,10)+50+"ms"})),n.wrapper.css({transition:"resize"==e.type?"none":""})):null!=n.stage&&(u=n.position.x,i=n.width/4,o=-(t=n.width)/2,a=t/2,(e=0==s||d?l?a:o:s==n.pageCount?l?o:a:c?l?r?o:a:r?a:o:0)!==this.centerEnd)&&(this.centerTween=new TWEEN.Tween({x:u}).delay(0).to({x:e},n.duration).onUpdate(function(){n.position.x=this.x,n.stage.cssScene.position.x=this.x}).easing(n.ease).start(),this.centerEnd=e)},width:function(e){if(null==e)return this.container.width();this.options.width=e,this.container.width(e),this.resize()}};var i=_;function _(e){e=e||{},this.type="PreviewObject";var t=this;function n(){setTimeout(function(){t.resize()},50)}t.zoomValue=1,window.addEventListener("resize",n,!1),this.sound=document.createElement("audio"),this.sound.setAttribute("src",e.soundFile+"?ver="+K.version),this.sound.setAttribute("type","audio/mpeg"),this.autoPlayFunction=function(){t&&t.target.autoPlay&&(t.target.direction==K.DIRECTION.RTL?t.target.prev():t.target.next())},this.dispose=function(){if(clearInterval(this.autoPlayTimer),this.autoPlayTimer=null,this.autoPlayFunction=null,this.target&&this.target.children)for(var e=0;e<this.target.children.length;e++){var t=this.target.children[e];t&&t.currentTween&&t.currentTween.stop()}this.zoomTween&&(this.zoomTween.stop&&this.zoomTween.stop(),this.zoomTween=null),this.container&&this.container.info&&this.container.info.remove&&this.container.info.remove(),this.target&&this.target.dispose&&this.target.dispose(),this.target=null,this.stage&&this.stage.dispose&&this.stage.dispose(),this.stage=null,this.ui&&this.ui.dispose&&this.ui.dispose(),this.ui=null,this.contentProvider&&this.contentProvider.dispose&&this.contentProvider.dispose(),this.contentProvider=null,window.removeEventListener("resize",n)}}K.PreviewObject=i;s(o,{}),o.prototype.updateInfo=function(e){this.flipbook&&this.flipbook.updateInfo&&this.flipbook.updateInfo(e)},o.prototype.initThumbs=function(){function e(){var e,t,n,i,o=0;Date.now()-s.thumblist.lastScrolled<100?o=1:(s.targetObject.container.find(".df-thumb-container .df-vrow").each(function(){var e,t=Y(this);if(!t.hasClass("df-thumb-loaded"))return o++,e=Y(this).attr("id").replace("df-thumb",""),s.getPage(e,r,!0),t.addClass("df-thumb-loaded"),!1}),0==o&&clearTimeout(a)),0<o&&r(),s.activeThumb!=s.targetObject._activePage&&null!=s.targetObject.thumbContainer&&s.targetObject.thumbContainer.hasClass("df-sidemenu-visible")&&(t=(e=s.thumblist.container).scrollTop,n=e.getBoundingClientRect().height,0<(i=s.targetObject.thumbContainer.find("#df-thumb"+s.targetObject._activePage)).length?(s.targetObject.thumbContainer.find(".df-selected").removeClass("df-selected"),i.addClass("df-selected"),t+n<(i=i[0]).offsetTop+i.scrollHeight?X.scrollIntoView(i,null,!1):i.offsetTop<t&&X.scrollIntoView(i),s.activeThumb=s.targetObject._activePage):(Y(e).scrollTop(124*s.targetObject._activePage),r()))}var a,s=this,r=(null==s.cache[s.thumbsize]&&(s.cache[s.thumbsize]=[]),function(){clearTimeout(a),a=setTimeout(function(){a=setTimeout(e,s.waitPeriod/2)},s.waitPeriod)}),t=(s.thumblist=s.targetObject.thumblist=new ThumbList({h:500,addFn:function(e){},scrollFn:r,itemHeight:128,totalRows:s.pageCount,generatorFn:function(e){var t=document.createElement("div"),e=e+1,n=(t.id="df-thumb"+e,document.createElement("div"));return n.innerHTML=e,t.appendChild(n),t}}),s.thumblist.lastScrolled=Date.now(),(s.thumblist.review=r)(),Y("<div>").addClass("df-thumb-container df-sidemenu-visible df-sidemenu")),n=(t.append(Y(s.thumblist.container).addClass("df-thumb-wrapper")),s.targetObject.thumbContainer=t,s.targetObject.container.append(t),Y(Q.div,{class:"df-ui-btn df-ui-sidemenu-close ti-close"}));t.append(n),s.thumblist.reset(Y(s.thumblist.container).height()),s.targetObject.container.on("click",".df-thumb-container .df-vrow",function(e){e.stopPropagation();e=Y(this).attr("id").replace("df-thumb","");s.targetObject.gotoPage(parseInt(e,10))})},o.prototype.initOutline=function(){var n=this,e=Y("<div>").addClass("df-outline-container df-sidemenu"),t=Y("<div>").addClass("df-outline-wrapper"),i=Y(Q.div,{class:"df-ui-btn df-ui-sidemenu-close ti-close"});function o(e){if(e=(e=1==n.options.overwritePDFOutline?[]:e)||[],n.outline)for(var t=0;t<n.outline.length;t++)n.outline[t].custom=!0,e&&e.push(n.outline[t]);0===e.length&&null!=n.targetObject.ui.outline&&n.targetObject.ui.outline.hide(),n.outlineViewer.render({outline:e})}e.append(i).append(t),n.targetObject.container.append(e),n.targetObject.outlineContainer=e,n.outlineViewer=new BookMarkViewer({container:t[0],linkService:n.linkService,outlineItemClass:"df-outline-item",outlineToggleClass:"df-outline-toggle",outlineToggleHiddenClass:"df-outlines-hidden"}),n.pdfDocument?n.pdfDocument.getOutline().then(function(e){o(e)}):o([]),1==n.options.autoEnableOutline&&n.targetObject.ui.outline.trigger("click"),1==n.options.autoEnableThumbnail&&n.targetObject.ui.thumbnail.trigger("click")},o.prototype.checkViewportSize=function(e,t,n){var i=this,o=i.targetObject,e=e*n,t=t*n,n=i.cacheIndex;if(i.contentSourceType==I.PDF){if(i.cacheIndex=Math.ceil(Math.max(e,t)),i.cacheIndex=Math.floor(Math.max(e,t)),i.cacheIndex=T(i.cacheIndex*y.pixelRatio,i.minDimension,i.maxDimension),null==i.cache[i.cacheIndex]&&(i.cache[i.cacheIndex]=[]),n!==i.cacheIndex){for(var a=0;a<o.children.length;a++)o.children[a];o.refresh()}i.imageViewport=i.refPage.getViewport({scale:t/i.normalViewport.height}),i.viewport="css"==o.mode?i.imageViewport:i.refPage.getViewport({scale:i.bookSize.height/i.normalViewport.height}),J(i.cacheIndex),i.annotedPage=void 0,i.review()}else null==i.cache[i.cacheIndex]&&(i.cache[i.cacheIndex]=[])},o.prototype.getCache=function(e,t){return 1==t?null==this.cache[this.thumbsize]?null:this.cache[this.thumbsize][e]:null==this.cache[this.cacheIndex]?null:this.cache[this.cacheIndex][e]},o.prototype.setCache=function(e,t,n,i){1==n?null!=this.cache[this.thumbsize]&&(this.cache[this.thumbsize][e]=t):(n=null==i?this.cacheIndex:i,null!=this.cache[n]&&(this.cache[n][e]=t))},o.prototype.setTarget=function(e){var n=this;if(null==e)return this.targetObject;(this.targetObject=e).contentProvider=this,e.container.removeClass("df-loading df-init"),null!=n.linkService&&(n.linkService.setViewer(e),n.initOutline()),e.processPage=function(e,t){0<e&&e<=n.pageCount?n.getPage(e,t):n.setPage(e,y.textureLoadFallback,t)},e.requestPage=function(){n.review("Request")},null!=e.resize&&e.resize()},o.prototype.review=function(e){var t=this;e=e||"timer review",clearTimeout(t.textureLoadTimeOut),t.textureLoadTimeOut=setTimeout(function(){t.textureLoadTimeOut=setTimeout(t.reviewPages,t.waitPeriod/2,t,e)},t.waitPeriod)},o.prototype.reviewPages=function(e,t){var n=(e=e||this).targetObject;if(null!=n){for(var i=L(n),o=(null!=t&&J(t),!1),a=0;a<e.targetObject.children.length;a++)if(1==n.children[a].isFlipping){o=!0;break}if(0==o){var s=3<n.children.length?3:n.children.length,r=i?n._activePage:C(n._activePage);for(e.baseNumber=r,1<e.zoomScale&&(s=1),a=0;a<s;a++){var l=Math.floor(a/2),l=a%2==0?-l*(i?1:2):(0==l?1:l)*(i?1:2),c=r+l,d=r+l+1,u=n.getPageByNumber(c),h=n.getPageByNumber(d),p=c+"|"+e.cacheIndex,g=d+"|"+e.cacheIndex,f=0;if(null!=u&&u.frontPageStamp!=p&&1==u.visible&&(u.frontTextureLoaded=!1,n.processPage(c,function(){e.review("Batch Call")}),u.frontPageStamp=p,f++),null==h||h.backPageStamp==g||1!=h.visible||i||(h.backTextureLoaded=!1,n.processPage(d,function(){e.review("Batch Call")}),h.backPageStamp=g,f++),0==l&&e.annotedPage!==r&&(e.getAnnotations(c),i||e.getAnnotations(d),e.annotedPage=r),0<f)break}0==f&&"css"!==n.mode&&e.setLoading(r)}else e.review("Revisit request"),null!=e.annotedPage&&"css"!==n.mode&&(t=C(n._activePage),Y(n.getContentLayer(t)).html(""),Y(n.getContentLayer(t+1)).html(""),e.annotedPage=null)}},o.prototype.getPage=function(p,g,f){var e,t,m=this,n=p=parseInt(p,10),i=m.contentSource;p<=0&&p>=m.pageCount?m.setPage(p,y.textureLoadFallback,g,f):m.contentSourceType==I.PDF?null!=m.getCache(p,f)?(m.setPage(p,m.getCache(p,f),g,f),J("Page "+p+" loaded from cache")):(!0!==f&&m.setLoading(p,!0),m.options.pageSize==K.PAGE_SIZE.DOUBLEINTERNAL&&2<p&&(n=Math.ceil((p-1)/2)+1),i.getPage(n,f).then(function(e){var t=p,n=g,i=f,o=m.options.forceFit,a=m.options.pageSize==K.PAGE_SIZE.DOUBLEINTERNAL&&1<t&&t<m.pageCount,s=a&&o?2:1,o=o?e.getViewport({scale:1}):m.normalViewport,r=m.cacheIndex/Math.max(o.width/s,o.height),l=(1==m.webgl&&(r=M(m.cacheIndex)/(1<m.pageRatio?o.width/s:o.height)),document.createElement("canvas")),c=performance.now(),d=m.cacheIndex,u=l.getContext("2d"),h=(1==i&&(r=m.thumbsize/m.normalViewport.height),l.height=Math.round(o.height*r),l.width=Math.round(o.width/s*r),"css"==m.targetObject.mode&&Math.abs(m.targetObject.zoomHeight-l.height)<2&&(l.height=m.targetObject.zoomHeight+0,l.width=m.targetObject.zoomWidth+0),o=e.getViewport({scale:r}),J("rendering "+t+" at "+l.width+"x"+l.height),a&&(ee(m.targetObject)?t%2==0&&(o.transform[4]=-l.width):t%2==1&&(o.transform[4]=-l.width)),{canvasContext:u,viewport:o});e.cleanupAfterRender=!0,e.render(h).promise.then(function(){J(performance.now()-c),c=performance.now(),1==i||1==m.options.canvasToBlob&&!0!==m.webgl?l.toBlob(function(e){e=K.createObjectURL(e,"image/jpeg");J(performance.now()-c),m.setCache(t,e,i,d),m.setPage(t,e,n,i)},"image/jpeg",m.pdfRenderQuality):(J("Setting Page "+t),m.setPage(t,l,n,i)),h=null})})):m.contentSourceType!=I.IMAGE&&m.contentSourceType!=I.HTML||(null!=m.getCache(p,f)?(m.setPage(p,m.getCache(p,f),g,f),J("Page "+p+" loaded from cache")):(!0!==f&&m.setLoading(p,!0),m.options.pageSize==K.PAGE_SIZE.DOUBLEINTERNAL&&2<p&&(n=Math.ceil((p-1)/2)+1),e=i[n-1],t=function(e){m.setCache(p,e,f,m.cacheIndex),m.setPage(p,e,g,f),null!=g&&g()},m.isCrossOrigin,Y("<img/>").attr("src",e).on("load",function(){Y(this).off(),null!=t&&t(e),J(this.height+":"+this.width)})))},o.prototype.getTargetPage=function(e){},o.prototype.setLoading=function(e,t){var n;null!=this.targetObject&&(1==this.webgl?(n=this.targetObject.container,1==t?!0!==n.isLoading&&(n.addClass("df-loading"),n.isLoading=!0,J("Loading icon at "+e+" as "+t)):null!=n.isLoading&&(n.removeClass("df-loading"),n.isLoading=null,J("Loading icon at "+e+" as "+t))):null!=(n=Y(this.targetObject.getContentLayer(e)))&&(1==t?n.addClass("df-page-loading"):n.removeClass("df-page-loading"),J("Loading icon at "+e+" as "+t)))},o.prototype.getAnnotations=function(n){var i=this;if(0!=i.options.enableAnnotation){var e=i.targetObject,t=(n=parseInt(n,10),i.contentSource),o=Y(e.getContentLayer(n));if(o.empty(),0<n&&n<=i.pageCount){if(i.contentSourceType==I.PDF&&(C(n),e=n,i.options.pageSize==K.PAGE_SIZE.DOUBLEINTERNAL&&2<n&&(e=Math.ceil((n-1)/2)+1),t.getPage(e).then(function(e){var t;null!=o&&0<o.length&&(t=e.getViewport({scale:1}),t=e.getViewport({scale:i.viewport.height/t.height}),i.setupAnnotations(e,t,o,n))})),null!=i.links&&null!=i.links[n])for(var a=i.links[n],s=0;s<a.length;s++){var r,l=a[s];l.dest&&l.dest.indexOf&&0==l.dest.indexOf("[html]")?((r=document.createElement("div")).innerHTML=l.dest.substr(6),r.className="customHtmlAnnotation"):((r=document.createElement("a")).setAttribute("dest",l.dest),r.className="customLinkAnnotation",r.href="#"+l.dest,r.onclick=function(){var e=this.getAttribute("dest");return e&&i.linkService.customNavigateTo(e),!1}),r.style.left=l.x+"%",r.style.top=l.y+"%",r.style.width=l.w+"%",r.style.height=l.h+"%",o[0].appendChild(r)}null!=i.html&&null!=i.html[n]&&(t=i.html[n],o.append(Y("<div class='customHTMLAnnotation'>").html(t)))}}},o.prototype.setPage=function(n,e,i,t){var o,a=this,s=a.targetObject,r=ee(s),l=L(s);1==t?a.targetObject.container.find("#df-thumb"+n).css({backgroundImage:c(e)}):(e==y.textureLoadFallback&&J("Fallback on "+n),null!=(o=s.getPageByNumber(n))?n%2!=0&&!r||n%2!=1&&r&&!l||l&&!r?(J(n+"rendered to back of "+o.color),o.backImage(e,function(e,t){o.backTextureLoaded=!0,a.setLoading(n),a.requiresImageTextureScaling&&t&&1!=n&&n!=a.pageCount&&(t.repeat.x=.5,t.offset.x=.5),null!=i&&i()})):(J(n+"rendered to front of "+o.color),o.frontImage(e,function(e,t){o.frontTextureLoaded=!0,a.setLoading(n),a.requiresImageTextureScaling&&t&&1!=n&&n!=a.pageCount&&(t.repeat.x=.5),null!=i&&i()})):J("Invalid set request on Page "+n))},o.prototype.setupAnnotations=function(i,o,a,s){var r;if(null!=a&&0!=Y(a).length)return r=this,i.getAnnotations().then(function(e){var t,n;o=o.clone({dontFlip:!0}),r.options.pageSize,K.PAGE_SIZE.DOUBLEINTERNAL,null!=a&&(0==(a=Y(a)).find(".annotationDiv").length&&a.append(Y("<div class='annotationDiv'>")),(t=a.find(".annotationDiv")).empty(),r.options.pageSize==K.PAGE_SIZE.DOUBLEINTERNAL&&2<s&&s%2==1?t.css({left:"-100%"}):1==s&&t.css({left:""}),pdfjsLib.AnnotationLayer.render({annotations:e,div:t[0],page:i,viewport:o,imageResourcesPath:y.imageResourcesPath,linkService:r.linkService}),r.options.annotationClass&&""!==r.options.annotationClass&&t.find(" > section").addClass(r.options.annotationClass),1==r.options.search)&&(0==a.find(".textLayerDiv").length&&a.append(Y("<div class='textLayerDiv'>")),n=a.find(".textLayerDiv"),i.getTextContent().then(function(e){var t=new K.TextLayerBuilder({textLayerDiv:n[0],pageIndex:null,viewport:o.clone({dontFlip:!1})});t.setTextContent(e),t.render()}))})};var j=o;function o(t,n,e,i){e=e||{};var o,a,s,r=this;if(r.contentRawSource=t||[y.textureLoadFallback],r.contentSource=r.contentRawSource,r.contentSourceType=null,r.minDimension=e.minTextureSize||256,r.maxDimension=e.maxTextureSize||2048,r.pdfRenderQuality=e.pdfRenderQuality||K.defaults.pdfRenderQuality,r.flipbook=i,r.waitPeriod=50,r.maxLength=297,r.enableDebug=!1,r.zoomScale=1,r.maxZoom=2,r.options=e,r.outline=e.outline,r.links=e.links,r.html=e.html,r.isCrossOrigin=e.isCrossOrigin,r.normalViewport={height:297,width:210,scale:1},r.viewport={height:297,width:210,scale:1},r.imageViewport={height:297,width:210,scale:1},r.bookSize={height:297,width:210},r.zoomViewport={height:297,width:210},r.thumbsize=128,r.cacheIndex=256,r.cache=[],r.pageRatio=e.pageRatio||r.viewport.width/r.viewport.height,r.textureLoadTimeOut=null,r.type="TextureLibrary",Array===r.contentSource.constructor||Array.isArray(r.contentSource)||r.contentSource instanceof Array){r.contentSourceType=I.IMAGE,r.pageCount=r.contentSource.length;for(var l=0;l<r.contentSource.length;l++)r.contentSource[l]=X.httpsCorrection(r.contentSource[l].toString());Y("<img/>").attr("src",r.contentSource[0]).on("load",function(){r.viewport.height=this.height,r.viewport.width=this.width,r.pageRatio=r.viewport.width/r.viewport.height,r.bookSize={width:(1<r.pageRatio?1:r.pageRatio)*r.maxLength,height:r.maxLength/(r.pageRatio<1?1:r.pageRatio)},r.zoomViewport={width:(1<r.pageRatio?1:r.pageRatio)*r.maxDimension,height:r.maxDimension/(r.pageRatio<1?1:r.pageRatio)},r.linkService=new PDFLinkService,Y(this).off(),r.options.pageSize==K.PAGE_SIZE.DOUBLEINTERNAL&&(r.pageCount=2*r.contentSource.length-2,1==r.options.webgl)&&(r.requiresImageTextureScaling=!0),null!=n&&(n(r),n=null),J(this.height+":"+this.width)})}else"string"==typeof r.contentSource||r.contentSource instanceof String?(o=function(){1<r.contentSource.indexOf(".base64")?Y.ajax({url:r.contentSource,xhrFields:{onprogress:function(e){e.lengthComputable&&r.updateInfo(r.options.text.loading+" PDF "+(100*e.loaded/e.total).toString().split(".")[0]+"% ...")}},success:function(e){r.options.docParameters={data:atob(e)},a()}}):a()},a=function(){var e;r&&(pdfjsLib.GlobalWorkerOptions.workerSrc=y.pdfjsWorkerSrc,r.contentSourceType=I.PDF,e=r.options.disableFontFace,g||ne||r.options.disableFontFace,(e=r.loading=pdfjsLib.getDocument(r.options.docParameters||{url:X.httpsCorrection(t),rangeChunkSize:isNaN(r.options.rangeChunkSize)?524288:r.options.rangeChunkSize,cMapUrl:y.cMapUrl,cMapPacked:!0,imageResourcesPath:y.imageResourcesPath,disableAutoFetch:!0,disableStream:!0,disableFontFace:e})).promise.then(function(t){(r.pdfDocument=t).getPage(1).then(function(e){r.normalViewport=e.getViewport({scale:1}),r.viewport=e.getViewport({scale:1}),r.viewport.height=r.viewport.height/10,r.viewport.width=r.viewport.width/10,r.pageRatio=r.viewport.width/r.viewport.height,r.bookSize={width:(1<r.pageRatio?1:r.pageRatio)*r.maxLength,height:r.maxLength/(r.pageRatio<1?1:r.pageRatio)},r.zoomViewport={width:(1<r.pageRatio?1:r.pageRatio)*r.maxDimension,height:r.maxDimension/(r.pageRatio<1?1:r.pageRatio)},r.refPage=e,1<t.numPages?t.getPage(2).then(function(e){r.options.pageSize==K.PAGE_SIZE.AUTO&&((e=e.getViewport({scale:1})).width/e.height>1.5*r.pageRatio?(r.options.pageSize=K.PAGE_SIZE.DOUBLEINTERNAL,r.pageCount=2*t.numPages-2):r.options.pageSize=K.PAGE_SIZE.SINGLE),null!=n&&(n(r),n=null)}):null!=n&&(n(r),n=null)}),r.linkService=new PDFLinkService,r.linkService.setDocument(t,null),r.pageCount=t.numPages,r.contentSource=t},function(e){var t,n;r&&(t="",(n=document.createElement("a")).href=r.contentSource,n.hostname!==window.location.hostname&&(t="CROSS ORIGIN!! "),r.updateInfo(t+"Cannot access file!  "+r.contentSource),$(document).trigger("pdfLoadFailed"))}),e.onProgress=function(e){var t;r&&(t=100*e.loaded/e.total,isNaN(t)?e&&e.loaded?r.updateInfo(r.options.text.loading+" PDF "+(Math.ceil(e.loaded/1e4)/100).toString()+"MB ..."):r.updateInfo(r.options.text.loading+" PDF ..."):r.updateInfo(r.options.text.loading+" PDF "+t.toString().split(".")[0]+"% ..."))})},s=function(){var e;r&&(y.pdfjsWorkerSrc.indexOf("?ver")<0&&(y.pdfjsWorkerSrc+="?ver="+K.version),r.updateInfo(r.options.text.loading+" PDF Worker ..."),(e=document.createElement("a")).href=y.pdfjsWorkerSrc,e.hostname!==window.location.hostname?(r.updateInfo(r.options.text.loading+" PDF Worker CORS ..."),Y.ajax({url:y.pdfjsWorkerSrc,cache:!0,success:function(e){y.pdfjsWorkerSrc=K.createObjectURL(e,"text/javascript"),o()}})):o())},null==window.pdfjsLib?r&&(r.updateInfo(r.options.text.loading+" PDF Service ..."),d(y.pdfjsSrc+"?ver="+K.version,function(){"function"==typeof define&&define.amd&&window.requirejs?(r.updateInfo(r.options.text.loading+" PDF Service (require) ..."),require.config({paths:{"pdfjs-dist/build/pdf.worker":y.pdfjsWorkerSrc.replace(".js","")}}),require(["pdfjs-dist/build/pdf"],function(e){window.pdfjsLib=e,s()})):("object"==typeof exports&&null!=exports["pdfjs-dist/build/pdf"]&&(window.pdfjsLib=exports["pdfjs-dist/build/pdf"]),s())},function(){r.updateInfo("Unable to load PDF service..")})):o()):console.error("Unknown source type. Please check documentation for help");return this.dispose=function(){r.loading&&r.loading.destroy&&r.loading.destroy(),r.loading=null,r.textureLoadTimeOut&&(clearTimeout(r.textureLoadTimeOut),r.textureLoadTimeOut=null),this.targetObject&&(this.targetObject.thumbContainer&&this.targetObject.thumbContainer.remove&&this.targetObject.thumbContainer.remove(),this.targetObject.outlineContainer&&this.targetObject.outlineContainer.remove&&this.targetObject.outlineContainer.remove(),this.targetObject.dispose&&this.targetObject.dispose(),this.targetObject.processPage=null,this.targetObject.requestPage=null,this.targetObject.container)&&this.targetObject.container.off&&this.targetObject.container.off(),this.pdfDocument&&this.pdfDocument.destroy&&this.pdfDocument.destroy(),this.linkService&&this.linkService.dispose&&this.linkService.dispose(),this.outlineViewer&&this.outlineViewer.dispose&&this.outlineViewer.dispose(),this.thumblist&&this.thumblist.dispose&&(this.thumblist.review=null,this.thumblist.dispose()),this.activeThumb=null,this.targetObject=null,this.pdfDocument=null,this.linkService=null,this.outlineViewer=null,this.thumblist=null,r=null},this}H.prototype={initDOM:function(){var e=this.element=Y(Q.div,{class:"df-book-page"}),t=this.wrapper=Y(Q.div,{class:"df-page-wrapper"}),n=this.front=Y(Q.div,{class:"df-page-front"}),i=this.back=Y(Q.div,{class:"df-page-back"}),o=this.foldInnerShadow=Y(Q.div,{class:"df-page-fold-inner-shadow"}),a=this.foldOuterShadow=Y(Q.div,{class:"df-page-fold-outer-shadow"});this.frontIMG=new Image,this.backIMG=new Image,W(n,this.segments),W(i,this.segments),e.append(t).append(a),t.append(n).append(i).append(o)},updatePoint:function(e){var t,n,i,o,a,s,r,l,c,d,u,h,p,g,f;null!=e&&(p=(t=null!=this.parent.dragPage?this.parent.dragPage:null!=e.page?e.page:this).element.width(),u=t.element.height(),d=(null!=this.parent.corner?this.parent:e).corner,s=K.CORNERS,n=t.side==m.right,d=d==s.BL||d==s.BR,e.rx=1==n?2*p-e.x:e.x,e.ry=1==d?u-e.y:e.y,s=Math.atan2(e.ry,e.rx),s=Math.PI/2-T(s,0,R(90)),h=n?e.x/2:p-e.x/2,i=e.ry/2,h=Math.max(0,Math.sin(s-Math.atan2(i,h))*k(h,i)),i=.5*k(e.rx,e.ry),c=Math.round(p-h*Math.sin(s)),h=Math.round(h*Math.cos(s)),s=v(s),o=d?n?90-s+180:180+s:n?s:90-s,a=d?n?90-s+180:s:n?s+180:o,s=d?n?90-s:s+90:n?o-90:o+180,r=n?p-c:c,l=d?u+h:-h,c=n?-c:c-p,d=d?-u-h:h,u=T(.5*e.distance/p,0,.5),h=T(.5*(2*p-e.rx)/p,.05,.3),t.element.addClass("df-folding"),e=n?t.back:t.front,p=n?t.front:t.back,g=t.foldOuterShadow,f=t.foldInnerShadow,t.wrapper.css({transform:b(r,l)+w(o)}),e.css({transform:w(-o)+b(-r,-l)}),p.css({transform:w(a)+b(c,d),boxShadow:"rgba(0, 0, 0, "+u+") 0px 0px 20px"}),f.css({transform:w(a)+b(c,d),opacity:h/2,backgroundImage:x.css+"linear-gradient( "+s+"deg, rgba(0, 0, 0, 0.25) , rgb(0, 0, 0) "+.7*i+"px, rgb(255, 255, 255) "+i+"px)"}),g.css({opacity:h/2,left:n?"auto":0,right:n?0:"auto",backgroundImage:x.css+"linear-gradient( "+(180-s)+"deg, rgba(0, 0, 0,0) "+i/3+"px, rgb(0, 0, 0) "+i+"px)"}))},updateAngle:function(e,t){var n=5*this.element.width();this.wrapper.css({perspective:n,perspectiveOrigin:1==t?"0% 50%":"100% 50%"}),this.front.css({display:1==t?e<=-90?"block":"none":e<90?"block":"none",transform:("MfS"!==x.dom?"":"perspective("+n+"px) ")+(1==t?"translateX(-100%) ":"")+"rotateY("+((1==t?180:0)+e)+"deg)"}),this.back.css({display:1==t?-90<e?"block":"none":90<=e?"block":"none",transform:("MSd"!==x.dom?"":"perspective("+n+"px) ")+(0==t?"translateX(100%) ":"")+"rotateY("+((0==t?-180:0)+e)+"deg)"})},tween:function(e){var t,n,i,o,a,s,r,l,c,d=this;null!=d&&null!=d.parent&&(t=L(d.parent),n=d.side==m.right,i=d.parent.direction==K.DIRECTION.RTL,r=d.parent.corner==K.CORNERS.BL||d.parent.corner==K.CORNERS.BR,o=1==d.magnetic,r=r?d.parent.height:0,s=0,r=d.end=d&&1==d.animateToReset?{x:n?d.parent.fullWidth:0,y:r}:{x:n?0:d.parent.fullWidth,y:r},d.ease=d.isHard?TWEEN.Easing.Quadratic.InOut:TWEEN.Easing.Linear.None,l=d.parent.duration,1==d.isHard?(null!=e&&(s=F(e.distance,e.fullWidth)),a=d.init={angle:s*(n?-1:1)},r=d.end=d&&1==d.animateToReset?{angle:n?0:-0}:{angle:n?-180:180}):null==e?(a=d.init=d&&1==d.animateToReset?{x:n?0:d.parent.fullWidth,y:0}:{x:n?d.parent.fullWidth:0,y:0},d.first={x:(n?3:1)*d.parent.fullWidth/4,y:0},d.mid={x:(n?1:3)*d.parent.fullWidth/4,y:0}):(a=d.init={x:e.x,y:e.y,opacity:1},d.first={x:3*e.x/4,y:3*e.y/4,opacity:1},d.mid={x:e.x/4,y:e.y/4,opacity:1},l=d.parent.duration*u(a.x,a.y,r.x,r.y)/d.parent.fullWidth,l=T(l,d.parent.duration/3,d.parent.duration)),a.index=0,r.index=1,d.isFlipping=!0,c=function(e){1==d.isHard?(d.updateAngle(e.angle,n),d.angle=e.angle):(d.updatePoint({x:e.x,y:e.y}),d.x=e.x,d.y=e.y),t&&!o&&(d.element[0].style.opacity=n&&!i||!n&&i?.5<e.index?2*(1-e.index):1:e.index<.5?2*e.index:1)},t&&(!n&&!i||n&&i)&&(d.element[0].style.opacity=0),d.completeTween=d.completeTween||function(e){d.isFlipping=!1,1==d.isHard?(d.updateAngle(d.end.angle),d.back.css({display:"block"}),d.front.css({display:"block"})):d.updatePoint({x:d.end.x,y:d.end.y}),d.element[0].style.opacity=1,!0!==d.animateToReset?d.side=d.side==m.right?m.left:m.right:d.animateToReset=null,d.currentTween=null,d.pendingPoint=null,d.magnetic=!1,d.parent.dragPage=null,d.parent.corner=K.CORNERS.NONE,1!=e&&d.parent.refresh()},1==d.isHard?d.currentTween=new TWEEN.Tween(a).delay(0).to(r,d.parent.duration).onUpdate(function(){c(this)}).easing(d.ease).onComplete(d.completeTween).start():null==e?d.currentTween=new TWEEN.Tween(a).delay(0).to(r,d.parent.duration).onUpdate(function(){c(this)}).easing(TWEEN.Easing.Sinusoidal.Out).onComplete(d.completeTween).start():(d.currentTween=new TWEEN.Tween(a).delay(0).to(r,l).onUpdate(function(){c(this)}).easing(TWEEN.Easing.Sinusoidal.Out).onComplete(d.completeTween),d.currentTween.start()))},frontImage:function(e,t){var n=this;function i(){n.front.css({backgroundImage:c(e)}),null!=t&&t()}1==n.canvasMode?(n.front.find(">canvas").remove(),e!==y.textureLoadFallback&&n.front.append(Y(e)),null!=t&&t()):e==y.textureLoadFallback?i():(n.frontIMG.onload=i,n.frontIMG.src=e)},backImage:function(e,t){var n=this;function i(){n.back.css({backgroundImage:c(e)}),null!=t&&t()}1==n.canvasMode?(n.back.find(">canvas").remove(),e!==y.textureLoadFallback&&n.back.append(Y(e)),null!=t&&t()):e==y.textureLoadFallback?i():(n.backIMG.onload=i,n.backIMG.src=e)},updateCSS:function(e){this.element.css(e)},resetCSS:function(){this.wrapper.css({transform:""}),this.front.css({transform:"",boxShadow:""}),this.back.css({transform:"",boxShadow:""})},clearTween:function(e){this.currentTween.stop(),this.completeTween(1==e),this.resetCSS()}};var U=H;function H(e){this.angles=e.angles||[0,0,0,0,0,0],this.stiffness=e.angles||.1,this.segments=e.segments||1,this.canvasMode=e.contentSourceType!==I.IMAGE&&0==e.canvasToBlob,this.initDOM()}function W(e){var t=e.contentLayer=Y(Q.div,{class:"df-page-content"});e.append(t)}s(r,{}),(r.prototype={add:function(e){e instanceof U?this.container.append(Y(e.element)):this.container.append(Y(e))},pan:function(e){var t=this.startPoint,n=this.contentProvider.zoomScale,i=this.left+(e.raw.x-t.raw.x),t=this.top+(e.raw.y-t.raw.y);this.left=Math.round(T(i,-this.shiftWidth,this.shiftWidth)),this.top=Math.round(T(t,-this.shiftHeight,this.shiftHeight)),1==n&&(this.left=0,this.top=0),this.startPoint=e,this.stage.css({transform:"translate3d("+this.left+"px,"+this.top+"px,0)"})},getPageByNumber:function(e){for(var t,n=L(this)?ee(this)?e+1:e:Math.floor((e-1)/2),i=0;i<this.pages.length;i++)n==parseInt(this.pages[i].name,10)&&(t=this.pages[i]);return t},getPageSide:function(e){var t=this.direction==K.DIRECTION.RTL,n=this.getPageByNumber(e);if(null!=n)return!L(this)&&e%2==0?t?n.back:n.front:t?n.front:n.back},getContentLayer:function(e){e=this.getPageSide(e);return null==e?null:e.contentLayer}}).init=function(e){var t=this;t.stage=Y(Q.div,{class:"df-book-stage"}),t.wrapper=Y(Q.div,{class:"df-book-wrapper"}),t.shadow=Y(Q.div,{class:"df-book-shadow"}),t.container.append(t.stage),t.stage.append(t.wrapper),t.wrapper.append(t.shadow),t.createStack(e)},r.prototype.createStack=function(e){for(var t="red,green,blue,yellow,orange,black".split(","),n=0;n<this.stackCount;n++){e.angles=[,this.stackCount-n],e.stiffness=(this.stackCount-n)/100;var i=new U(e);i.angles[1]=180,i.index=n,i.parent=this,i.textureReady=!1,i.textureRequested=!1,this.wrapper.append(i.element),i.isFlipping=!1,this.pages.push(i),i.color=t[n]}this.children=this.pages},r.prototype.isPageHard=function(e){return X.isHardPage(this.hardConfig,e,this.pageCount,L(this))},r.prototype.setDuration=function(e){this.duration=e},r.prototype.moveBy=function(e){e=this._activePage+e,e=T(e,this.startPage,this.endPage);1!=this.firstFlipped&&(this.previewObject.analytics({eventAction:"First Page Flip",options:this.previewObject.options}),this.firstFlipped=!0),this.gotoPage(e)},r.prototype.next=function(e){null==e&&(e=this.direction==K.DIRECTION.RTL?-this.pageMode:this.pageMode),this.moveBy(e)},r.prototype.prev=function(e){null==e&&(e=this.direction==K.DIRECTION.RTL?this.pageMode:-this.pageMode),this.moveBy(e)},r.prototype.eventToPoint=function(e){e=p(e);var t=this.wrapper,n=this.pages,i=this.pageWidth,o=this.fullWidth,a=this.height,s=(Y(window),{x:e.clientX,y:e.clientY}),r=s.x-t[0].getBoundingClientRect().left,t=s.y-t[0].getBoundingClientRect().top,l=(s.x=s.x-this.container[0].getBoundingClientRect().left,s.y=s.y-this.container[0].getBoundingClientRect().top,this.drag==m.none?r<i?r:o-r:this.drag==m.left?r:o-r),i=r<i?n[this.stackCount/2-1]:n[this.stackCount/2],n=r<this.foldSense?m.left:r>o-this.foldSense?m.right:m.none,c=this.foldSense,d=K.CORNERS,c=0<=r&&r<c?0<=t&&t<=c?d.TL:a-c<=t&&t<=a?d.BL:c<t&&t<a-c?d.L:d.NONE:o-c<=r&&r<=o?0<=t&&t<=c?d.TR:a-c<=t&&t<=a?d.BR:c<t&&t<a-c?d.R:d.NONE:d.NONE;return{isInsidePage:0<=r&&r<=o&&0<=t&&t<=a,isInside:c!==d.NONE&&c!==d.L&&c!==d.R,x:r,y:t,fullWidth:o,rawDistance:o-r,distance:l,page:i,drag:n,foldSense:this.foldSense,event:e,raw:s,corner:c}},r.prototype.gotoPage=function(e){e=parseInt(e,10),this._activePage=e,1==this.autoPlay&&this.previewObject.setAutoPlay(this.autoPlay),this.updatePage(e),this&&this.thumblist&&this.thumblist.review&&this.thumblist.review()},r.prototype.refresh=function(){this.updatePage(this._activePage),null!=this.flipCallback&&this.flipCallback()},r.prototype.updatePage=function(e){var t=this.direction==K.DIRECTION.RTL,n=L(this),i=(C(e),n?1:2),o=(e=Math.floor(e/i),t&&(e=Math.ceil(this.pageCount/i)-e),this.oldBaseNumber||0),a=this.pageCount/i,s=this.stackCount,r=Math.floor(s/2);e<o?(this.children[s-1].skipFlip=!0,this.children.unshift(this.children.pop())):o<e&&(this.children[0].skipFlip=!0,this.children.push(this.children.shift()));for(var l=0;l<s;l++){var c,d=this.children[l],u=(o!==e&&null!=d.currentTween&&d.clearTween(!0),d.side),h=e-r+l,p=(t&&(h=n?this.pageCount-h:Math.ceil(this.pageCount/2)-h-1),d.name);d.isHard=this.isPageHard(h),d.isHard?d.element.addClass("df-hard-page"):(d.element.removeClass("df-hard-page"),d.front.css({display:"block"}),d.back.css({display:"block"})),0==h||h==a?d.element.addClass("df-cover-page"):d.element.removeClass("df-cover-page"),Y(d.element).attr("pageNumber")!=h&&(d.front.contentLayer.empty(),d.back.contentLayer.empty()),Y(d.element).attr("pageNumber",h),d.isEdge=!1,0!=l&&l!=s-1&&(d.isEdge=!1),c=l<r?m.left:m.right,0==d.isFlipping&&(c!==u&&0==d.skipFlip?(this.animatePage(d),null!=this.preFlipCallback&&this.preFlipCallback()):(d.skipFlip=!1,d.element.removeClass("df-flipping df-quick-turn df-folding df-left-side df-right-side"),d.element.addClass(l<r?"df-left-side":"df-right-side"),d.side=c)),d.visible=n?t?l<r||d.isFlipping:r<=l||d.isFlipping:0<=h&&h<a||n&&h==a,null!=this.requestPage&&1==d.visible&&(d.name=h.toString(),d.name!=p)&&(d.backTextureLoaded=!1,d.frontTextureLoaded=!1,d.backPageStamp="-1",d.frontPageStamp="-1",d.thumbLoaded=!1,d.front.contentLayer.html(""),d.back.contentLayer.html(""),d.frontImage(y.textureLoadFallback),d.backImage(y.textureLoadFallback),this.requestPage()),d.oldDepth=d.depth,d.updateCSS({display:1==d.visible?"block":"none",zIndex:6+(l<r?l-r:r-l),transform:""}),null==d.pendingPoint&&0==d.isFlipping&&d.resetCSS()}0==TWEEN.getAll().length&&clearInterval(this.animate),Y(".quick-hint").html(e),this.oldBaseNumber=e,this.updatePageCallback&&this.updatePageCallback()},r.prototype.animatePage=function(e){e.element.addClass("df-flipping"),e.isFlipping=!0,null!=this.animate&&clearInterval(this.animate),this.animate=setInterval(this.animateF,30),e.tween(e.pendingPoint)};var V=r;function G(e){for(var t=!1,n=0;n<e.pages.length;n++)if(1==e.pages[n].isFlipping){t=!0;break}return t}function r(e,t){var s=this;function n(e){s.dragPage!=e.page&&1==e.page.visible&&(s.dragPage.clearTween(!0),s.dragPage=e.page,s.corner=e.corner,s.dragPage.pendingPoint=e)}s.type="BookCSS",s.images=e.images||[],s.pageCount=e.pageCount||1,s.foldSense=50,s.stackCount=4,s.mode="css",s.pages=[],s.duration=e.duration,s.container=Y(t),s.options=e,s.drag=m.none,s.pageMode=e.pageMode||(te||s.pageCount<=2?K.PAGE_MODE.SINGLE:K.PAGE_MODE.DOUBLE),s.singlePageMode=e.singlePageMode||(te?K.SINGLE_PAGE_MODE.BOOKLET:K.SINGLE_PAGE_MODE.ZOOM),s.swipe_threshold=te?15:50,s.direction=e.direction||K.DIRECTION.LTR,s.startPage=1,s.endPage=s.pageCount,s._activePage=e.openPage||s.startPage,s.hardConfig=e.hard,E="WebKitCSSMatrix"in window||document.body&&"MozPerspective"in document.body.style,s.animateF=function(){0<TWEEN.getAll().length?TWEEN.update():clearInterval(s.animate)},s.init(e),s.skipDrag=!1;function i(e){var t,n,i,o=s.eventToPoint(e);null!=e.touches&&2==e.touches.length&&null!=s.startTouches&&(s.zoomDirty=!0,n=X.getVectorAvg(X.getTouches(e,s.container.offset())),t=X.calculateScale(s.startTouches,X.getTouches(e)),s.lastScale,s.contentProvider.zoomScale,n.x,n.y,s.stage.css({transform:"translate3d("+s.left+"px,"+s.top+"px,0) scale3d("+t+","+t+",1)"}),s.lastScale=t,s.lastZoomCenter=n,e.preventDefault()),null!=e.touches&&1<e.touches.length||null==s.startPoint||null!=s.startTouches||(t=s.dragPage||o.page,1!==s.contentProvider.zoomScale?null==e.touches&&1!=s.isPanning||(s.pan(o),e.preventDefault()):!0!==s.skipDrag&&(o.distance,G(s)||(null==s.dragPage&&1!=o.isInside||(null!=s.dragPage?J("set mouse down move"):(o.y=T(o.y,1,s.height-1),o.x=T(o.x,1,o.fullWidth-1)),n=s.corner||o.corner,t.isHard?(n=n==K.CORNERS.BR||n==K.CORNERS.TR,i=F(o.distance,o.fullWidth),t.updateAngle(i*(n?-1:1),n)):t.updatePoint(o,s),t.magnetic=!0,t.magneticCorner=o.corner,e.preventDefault()),null==s.dragPage&&null!=t&&0==o.isInside&&1==t.magnetic&&(t.pendingPoint=o,t.animateToReset=!0,s.corner=t.magneticCorner,s.animatePage(t),t.pendingPoint=null,t.magnetic=!1,t.magneticCorner=null),1==s.isPanning&&null==s.dragPage&&1==s.contentProvider.zoomScale&&(i=o.x-s.lastPos,performance.now(),s.lastTime,Math.abs(i)>s.swipe_threshold&&(i<0?s.next():s.prev(),s.drag=m.none,s.isPanning=!1,e.preventDefault()),s.lastPos=o.x,s.lastTime=performance.now()))))}function o(e){var t;null!=e.touches&&0==e.touches.length&&(s.contentProvider.zoomScale,1==s.zoomDirty&&(s.previewObject.contentProvider.zoomScale=X.limitAt(s.previewObject.contentProvider.zoomScale*s.lastScale,1,s.previewObject.contentProvider.maxZoom),s.previewObject.zoomValue=+s.previewObject.contentProvider.zoomScale,s.previewObject.resize(),s.zoomDirty=!1),s.wrapper.css({transform:""}),s.lastScale=null,s.startTouches=null),s.isPanning=!1,null!=e.touches&&1<e.touches.length||!0!==s.skipDrag&&(t=s.eventToPoint(e),s.dragPage&&(e.preventDefault(),(s.dragPage.pendingPoint=t).x==s.startPoint.x&&t.y==s.startPoint.y&&1==t.isInside?s.corner==K.CORNERS.BR||s.corner==K.CORNERS.TR?(n(t),!0!==s.dragPage.isFlipping&&s.next()):s.corner!=K.CORNERS.BL&&s.corner!=K.CORNERS.TL||(n(t),!0!==s.dragPage.isFlipping&&s.prev()):!0!==s.dragPage.isFlipping&&(t.distance>t.fullWidth/2?t.x>t.fullWidth/2?s.prev():s.next():(s.dragPage.animateToReset=!0,s.animatePage(s.dragPage))),s.dragPage)&&(s.dragPage.pendingPoint=null,s.dragPage.magnetic=!1),s.drag=m.none)}function a(e){var t=s.eventToPoint(e),n=e.srcElement||e.originalTarget;s.dragPage&&s.dragPage.magnetic||s.wrapper[0].contains(e.target)&&1==s.contentProvider.zoomScale&&t.x==s.startPoint.x&&t.y==s.startPoint.y&&t.isInsidePage&&s.startPoint.page==t.page&&!t.page.isFlipping&&"A"!==n.nodeName&&(0==s.startPoint.page.side?(s.corner=K.CORNERS.TL,s.prev()):(s.corner=K.CORNERS.TR,s.next()),s.startPoint.page=null,s.isPanning=!1)}function r(e){var t;null!=e.touches&&2==e.touches.length&&null==s.startTouches&&(s.startTouches=X.getTouches(e),s.lastScale=1),null!=e.touches&&1<e.touches.length||null==e.touches&&0!==e.button||(e=s.eventToPoint(e),s.startPoint=e,s.left=s.left||0,s.top=s.top||0,s.isPanning=!0,s.lastPos=e.x,s.lastTime=performance.now(),!0===s.skipDrag)||1!=e.isInside||G(s)||(s.startPoint=e,s.drag=e.drag,s.dragPage=e.page,s.corner=e.corner,J(s.corner),(t=s.dragPage).parent.container.find(".df-folding").removeClass("df-folding"),t.element.addClass("df-folding"),e.page.isHard||e.page.updatePoint(e,s),"0"==e.page.name?s.shadow.css({width:"50%",left:s.direction==K.DIRECTION.RTL?0:"50%",transitionDelay:""}):e.page.name==Math.ceil(s.pageCount/2)-1&&s.shadow.css({width:"50%",left:s.direction==K.DIRECTION.RTL?"50%":0,transitionDelay:""}))}function l(e){var t,n,i=0,o=(null!=e.wheelDelta?i=e.wheelDelta/120:null!=e.detail&&(i=-e.detail/3),s.contentProvider.zoomScale),a=s.contentProvider.maxZoom;i&&(0<i&&o<a||i<0&&1<o)&&(e.stopPropagation(),e.preventDefault(),a=s.eventToPoint(e),e=s.eventToPoint(e),n=s.container.width()/2,t=s.container.height()/2-23,s.previewObject.zoom(i),o!==(i=s.contentProvider.zoomScale))&&(o=i/o,1==i?(s.left=0,s.top=0):(s.left*=o,s.top*=o),i=(a.raw.x-n)*o,o=(a.raw.y-t)*o,e.raw.x=n+i,e.raw.y=t+o,s.startPoint=e,s.pan(a),n=s.dragPage||a.page,null==s.dragPage)&&null!=n&&1==a.isInside&&1==n.magnetic&&(n.pendingPoint=a,n.animateToReset=!0,s.corner=n.magneticCorner,s.animatePage(n),n.pendingPoint=null,n.magnetic=!1,n.magneticCorner=null)}var t=s.container[0],c=s.stage[0];t&&(c.addEventListener("mousemove",i,!1),c.addEventListener("touchmove",i,!1),c.addEventListener("mousedown",r,!1),c.addEventListener("click",a,!1),c.addEventListener("mouseup",o,!1),c.addEventListener("touchend",o,!1),c.addEventListener("touchstart",r,!1),1==s.options.scrollWheel)&&(c.addEventListener("mousewheel",l,!1),c.addEventListener("DOMMouseScroll",l,!1)),this.dispose=function(){c.removeEventListener("mousemove",i,!1),c.removeEventListener("touchmove",i,!1),c.removeEventListener("mousedown",r,!1),c.removeEventListener("click",a,!1),c.removeEventListener("mouseup",o,!1),c.removeEventListener("touchend",o,!1),c.removeEventListener("touchstart",r,!1),1==s.options.scrollWheel&&(c.removeEventListener("mousewheel",l,!1),c.removeEventListener("DOMMouseScroll",l,!1)),s.updatePageCallback=null,s.flipCallback=null,s.animateF=null,s.stage.remove()}}s(P,q=i),P.prototype.init=function(o){var e,s=this,r=s.target,t=s.options;function n(){MOCKUP.defaults.anisotropy=0,MOCKUP.defaults.groundTexture="blank",THREE.skipPowerOfTwo=!0,A(),null!=e&&e()}1==o?(e=function(){s.container.css({minHeight:300,minWidth:300}),s.stage=new f(l(s.options,{container:s.container})),(s.stage.previewObject=s).contentProvider=new j(s.contentSource,function(e){var t={pageCount:e.pageCount,stackCount:6,segments:20,width:e.bookSize.width,height:e.bookSize.height},n=(s.target=r=s.stage.target=new MOCKUP.Book(l(s.options,t),s.stage),s.extendtarget(),B(s.container,s),r.ui=s.ui,r.container=s.container,e.webgl=o,e.setTarget(s.target),r.getContentLayer=function(e){var t=r.direction==K.DIRECTION.RTL,n=s.stage.cssScene.divLeft.element,i=s.stage.cssScene.divRight.element;C(r._activePage);return!L(r)&&e%2==0?t?i:n:t?n:i},r.stage=s.stage,r.flipCallback=function(){var e,t,n,i,o,a;s.contentProvider&&(s.contentProvider.review("flipCallback"),i=C(r._activePage),n=r.getPageByNumber(i),i=r.getPageByNumber(i+1),o=r.parent.cssScene.divLeft,a=r.parent.cssScene.divRight,r.pageMode,K.PAGE_MODE.SINGLE,r.direction,K.DIRECTION.RTL,null!=n&&null!=o&&(e=Math.abs(n.geometry.boundingBox.max.x-n.geometry.boundingBox.min.x),t=Math.abs(n.geometry.boundingBox.max.z-n.geometry.boundingBox.min.z),o.rotation.y=.9*-Math.atan2(t,e),o.position.z=.8*t,o.position.x=t/2.5,Y(o.element).css({width:e,left:-e/2})),null!=i&&null!=a&&(e=Math.abs(i.geometry.boundingBox.max.x-i.geometry.boundingBox.min.x),t=Math.abs(i.geometry.boundingBox.max.z-i.geometry.boundingBox.min.z),a.rotation.y=.9*Math.atan2(t,e),a.position.z=.8*t,a.position.x=-t/2.5,Y(a.element).css({width:e,left:e/2})),null!=s.options.onFlip)&&s.options.onFlip(s)},r.resize=void s.resize(),r.updatePageCallback=function(){s.ui.update(),s.checkCenter(),s.stage.renderRequestPending=!0},Y(s.stage.cssScene.divLeft.element)),i=Y(s.stage.cssScene.divRight.element);r.preFlipCallback=function(){n.empty(),i.empty(),null!=s.options.beforeFlip&&s.options.beforeFlip(s),s.playSound()},Y(window).trigger("resize"),n.css({width:e.bookSize.width,height:e.bookSize.height,left:-e.bookSize.width/2}),i.css({width:e.bookSize.width,height:e.bookSize.height,left:e.bookSize.width/2}),r.ease=TWEEN.Easing.Cubic.InOut,r.contentProvider=e,r.duration=s.options.duration,r.gotoPage(r._activePage),r.flipCallback(),1==s.options.isLightBox&&s.analytics({eventAction:"Book Ready",options:s.options}),null!=s.options.onReady&&s.options.onReady(s)},t,s)},null==window.MOCKUP?(s.updateInfo(t.text.loading+" WEBGL 3D ..."),"function"==typeof define&&define.amd&&window.requirejs?(requirejs.config({paths:{three:y.threejsSrc.replace(".js","")},shim:{three:{exports:"THREE"}}}),require(["three"],function(e){return window.THREE=e,d(y.mockupjsSrc+"?ver="+K.version,function(){n()}),e})):"function"==typeof define&&define.amd?require(["three",y.threejsSrc.replace(".js","")],function(e,t){e(function(){})}):d(y.threejsSrc+"?ver="+K.version,function(){d(y.mockupjsSrc+"?ver="+K.version,function(){n()})})):n()):s.contentProvider=new j(s.contentSource,function(e){var t={pageCount:e.pageCount,contentSourceType:e.contentSourceType};s.target=r=new V(l(s.options,t),s.container),(s.target.previewObject=s).extendtarget(),B(s.container,s),e.webgl=o,e.setTarget(s.target),e.waitPeriod=2,r.ease=TWEEN.Easing.Quadratic.InOut,r.duration=s.options.duration,r.container=s.container,r.updatePageCallback=function(){s.ui.update(),s.checkCenter()},r.resize=void s.resize(),Y(window).trigger("resize"),r.flipCallback=function(){s.contentProvider&&(s.contentProvider.review("flipCallback"),null!=s.options.onFlip)&&s.options.onFlip(s)},r.preFlipCallback=function(){null!=s.options.beforeFlip&&s.options.beforeFlip(s),s.playSound()},r.gotoPage(r._activePage),r.flipCallback(),null!=s.options.onReady&&s.options.onReady(s),s.analytics({eventAction:"Book Ready",options:s.options})},t,s)},P.prototype.extendtarget=function(){var n=this;(n.target.previewObject=n).target.reset=function(){for(var e=0;e<n.target.children.length;e++){var t=n.target.children[e];t.skipFlip=!0,t.name="-2"}n.contentProvider.annotedPage="-2",n.target.refresh()}},P.prototype.getURLHash=function(){var e;return null!=this.options.id&&(e=X.getSharePrefix()+(null!=this.options.slug?this.options.slug:this.options.id)+"/",null!=this.target&&null!=this.target._activePage&&(e+=this.target._activePage+"/"),window.location.hash=e),window.location.href},P.prototype.end=function(){this.target.gotoPage(this.target.endPage)},P.prototype.gotoPage=function(e){this.target.gotoPage(e),null!=this.ui&&this.ui.update()},P.prototype.prev=function(){this.target.prev()},P.prototype.next=function(){this.target.next()},P.prototype.updateInfo=function(e){this.container&&this.container.info&&this.container.info.html&&this.container.info.html(e)},P.prototype.analytics=function(e){if(1==this.options.enableAnalytics)try{var t=e.options,n=void 0,i=(t&&(n=t.bookTitle||t.slug||t.id),window.gtag);i?i("event",e.eventAction,{event_category:"Flipbook",event_label:n}):(window.ga||window.__gaTracker)("send",{hitType:"event",eventCategory:"Flipbook",eventAction:e.eventAction,eventLabel:n})}catch(e){}};var q,Z=P;function P(e,t,n){q.call(this,n);var i=this,o=(i.type="FlipBook",i.container=e,i.options=n,i.options.source=t,i.contentSource=t,null!=n.height&&n.height.toString().indexOf("%")<0?i.container.height(Math.min(n.height,Y(window).height())):i.container.height(n.height),i.options.isLightBox&&window.dfLightBox.closeButton.addClass(i.options.icons.close),i.options.pageSize==K.PAGE_SIZE.DOUBLEINTERNAL&&((Array===i.contentSource.constructor||Array.isArray(i.contentSource)||i.contentSource instanceof Array)&&(i.options.singlePageMode=K.SINGLE_PAGE_MODE.ZOOM),i.container.addClass("df-double-internal")),i.options.isLightBox||null==i.container.attr("id")||(i.options.id=i.container.attr("id")),!0!==i.options.parsed&&null!=i.options.links&&K.parseLinks(i.options.links),i.webgl=1==n.webgl&&1==D);return e.addClass("df-container df-loading df-init df-floating df-controls-"+i.options.controlsPosition),1==i.options.transparent&&e.addClass("df-transparent"),i.options.direction==K.DIRECTION.RTL&&e.addClass("df-rtl"),i.container.info=Y(Q.div,{class:"loading-info"}).appendTo(i.container).html(i.options.text.loading+"..."),(-1!==a.indexOf("MSIE")||0<navigator.appVersion.indexOf("Trident/")||g&&!ne)&&(i.options.webgl=!1),a.match(/msie\s[5-9]/i)?(i.container.info.html("Your browser (Internet Explorer) is out of date to run DFlip Flipbook Plugin. <br><a href='http://browsehappy.com/'>Upgrade to a new one</a>").addClass("df-old-browser"),e.removeClass("df-loading")):(e=null==n.backgroundImage||""==n.backgroundImage?"":"url('"+n.backgroundImage+"')",i.container.css({position:"relative",overflow:"hidden",backgroundColor:n.backgroundColor,backgroundImage:e}),1==i.options.isLightBox&&i.analytics({eventAction:"Open Book",options:i.options}),i.init(o,t),null!=i.options.onCreate&&i.options.onCreate(i)),i}Y.fn.extend({shelf:function(){},flipBook:function(e,t){return new Z(Y(this),e,Y.extend(!0,{},y,t))}})}(DFLIP,jQuery),!function(e){if(e.URL=e.URL||e.webkitURL,e.Blob&&e.URL)try{return new Blob}catch(e){}var a=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||function(e){function r(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]}function t(){this.data=[]}function l(e,t,n){this.data=e,this.size=e.length,this.type=t,this.encoding=n}function c(e){this.code=this[this.name=e]}var n=t.prototype,i=l.prototype,d=e.FileReaderSync,o="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),a=o.length,s=e.URL||e.webkitURL||e,u=s.createObjectURL,h=s.revokeObjectURL,p=s,g=e.btoa,f=e.atob,m=e.ArrayBuffer,v=e.Uint8Array,b=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(l.fake=i.fake=!0;a--;)c.prototype[o[a]]=a+1;return(p=s.createObjectURL?p:e.URL=function(e){var t=document.createElementNS("http://www.w3.org/1999/xhtml","a");return t.href=e,"origin"in t||("data:"===t.protocol.toLowerCase()?t.origin=null:(e=e.match(b),t.origin=e&&e[1])),t}).createObjectURL=function(e){var t=e.type;return null===t&&(t="application/octet-stream"),e instanceof l?(t="data:"+t,"base64"===e.encoding?t+";base64,"+e.data:"URI"===e.encoding?t+","+decodeURIComponent(e.data):g?t+";base64,"+g(e.data):t+","+encodeURIComponent(e.data)):u?u.call(s,e):void 0},p.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&h&&h.call(s,e)},n.append=function(e){var t=this.data;if(v&&(e instanceof m||e instanceof v)){for(var n="",i=new v(e),o=0,a=i.length;o<a;o++)n+=String.fromCharCode(i[o]);t.push(n)}else if("Blob"===r(e)||"File"===r(e)){if(!d)throw new c("NOT_READABLE_ERR");var s=new d;t.push(s.readAsBinaryString(e))}else e instanceof l?"base64"===e.encoding&&f?t.push(f(e.data)):"URI"===e.encoding?t.push(decodeURIComponent(e.data)):"raw"===e.encoding&&t.push(e.data):("string"!=typeof e&&(e+=""),t.push(unescape(encodeURIComponent(e))))},n.getBlob=function(e){return arguments.length||(e=null),new l(this.data.join(""),e,"raw")},n.toString=function(){return"[object BlobBuilder]"},i.slice=function(e,t,n){var i=arguments.length;return i<3&&(n=null),new l(this.data.slice(e,1<i?t:this.data.length),n,this.encoding)},i.toString=function(){return"[object Blob]"},i.close=function(){this.size=0,delete this.data},t}(e),t=(e.Blob=function(e,t){var t=t&&t.type||"",n=new a;if(e)for(var i=0,o=e.length;i<o;i++)Uint8Array&&e[i]instanceof Uint8Array?n.append(e[i].buffer):n.append(e[i]);t=n.getBlob(t);return!t.slice&&t.webkitSlice&&(t.slice=t.webkitSlice),t},Object.getPrototypeOf||function(e){return e.__proto__});e.Blob.prototype=t(new e.Blob)}(window),!function(e){var d,u=e.Uint8Array,e=e.HTMLCanvasElement,t=e&&e.prototype,s=/\s*;\s*base64\s*(?:;|$)/i,r="toDataURL";u&&(d=new u([62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51])),e&&!t.toBlob&&(t.toBlob=function(e,t){var n,i,o,a;t=t||"image/png",this.mozGetAsFile?e(this.mozGetAsFile("canvas",t)):this.msToBlob&&/^\s*image\/png\s*(?:$|;)/i.test(t)?e(this.msToBlob()):(o=Array.prototype.slice.call(arguments,1),n=(o=this[r].apply(this,o)).indexOf(","),i=o.substring(n+1),o=s.test(o.substring(0,n)),Blob.fake?((a=new Blob).encoding=o?"base64":"URI",a.data=i,a.size=i.length):u&&(a=new Blob(o?[function(e){for(var t,n,i=e.length,o=new u(i/4*3|0),a=0,s=0,r=[0,0],l=0,c=0;i--;)n=e.charCodeAt(a++),255!==(t=d[n-43])&&null!=t&&(r[1]=r[0],r[0]=n,c=c<<6|t,4===++l)&&(o[s++]=c>>>16,61!==r[1]&&(o[s++]=c>>>8),61!==r[0]&&(o[s++]=c),l=0);return o}(i)]:[decodeURIComponent(i)],{type:t})),e(a))},t.toBlobHD=t.toDataURLHD?function(){r="toDataURLHD";var e=this.toBlob();return r="toDataURL",e}:t.toBlob)}(window),!function(){var e;"performance"in window==!1&&(window.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in window.performance==!1&&(e=window.performance.timing&&window.performance.timing.navigationStart?window.performance.timing.navigationStart:Date.now(),window.performance.now=function(){return Date.now()-e})}(),!function(){n=[];var n,i,r={getAll:function(){return n},removeAll:function(){n=[]},add:function(e){n.push(e)},remove:function(e){e=n.indexOf(e);-1!==e&&n.splice(e,1)},update:function(e){if(0===n.length)return!1;var t=0;for(e=null!=e?e:window.performance.now();t<n.length;)n[t].update(e)?t++:n.splice(t,1);return!0}};r.Tween=function(e){var t,c=e,d={},u={},h={},p=1e3,g=0,f=!1,n=!1,m=0,v=null,b=r.Easing.Linear.None,w=r.Interpolation.Linear,x=[],P=null,y=!1,C=null,L=null,i=null;for(t in e)d[t]=parseFloat(e[t],10);this.to=function(e,t){return null!=t&&(p=t),u=e,this},this.start=function(e){for(var t in r.add(this),y=!(n=!0),v=null!=e?e:window.performance.now(),v+=m,u){if(u[t]instanceof Array){if(0===u[t].length)continue;u[t]=[c[t]].concat(u[t])}null!==d[t]&&(d[t]=c[t],d[t]instanceof Array==!1&&(d[t]*=1),h[t]=d[t]||0)}return this},this.stop=function(){return n&&(r.remove(this),n=!1,null!==i&&i.call(c),this.stopChainedTweens()),this},this.stopChainedTweens=function(){for(var e=0,t=x.length;e<t;e++)x[e].stop()},this.complete=function(){return n&&(r.remove(this),n=!1,null!==L&&L.call(c),this.completeChainedTweens()),this},this.completeChainedTweens=function(){for(var e=0,t=x.length;e<t;e++)x[e].complete()},this.delay=function(e){return m=e,this},this.repeat=function(e){return g=e,this},this.yoyo=function(e){return f=e,this},this.easing=function(e){return b=null==e?b:e,this},this.interpolation=function(e){return w=e,this},this.chain=function(){return x=arguments,this},this.onStart=function(e){return P=e,this},this.onUpdate=function(e){return C=e,this},this.onComplete=function(e){return L=e,this},this.onStop=function(e){return i=e,this},this.update=function(e){var t,n,i,o,a,s;if(e<v)return!0;for(t in!1===y&&(null!==P&&P.call(c),y=!0),i=b(n=1<(n=(e-v)/p)?1:n),u)null!==d[t]&&(o=d[t]||0,(a=u[t])instanceof Array?c[t]=w(a,i):"number"==typeof(a="string"==typeof a?a.startsWith("+")||a.startsWith("-")?o+parseFloat(a,10):parseFloat(a,10):a)&&(c[t]=o+(a-o)*i));if(null!==C&&C.call(c,i),1!=n)return!0;if(0<g){for(t in isFinite(g)&&g--,h)"string"==typeof u[t]&&(h[t]=h[t]+parseFloat(u[t],10)),f&&(s=h[t],h[t]=u[t],u[t]=s),d[t]=h[t];return f&&0,v=e+m,!0}null!==L&&L.call(c);for(var r=0,l=x.length;r<l;r++)x[r].start(v+p);return!1}},r.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}}},r.Interpolation={Linear:function(e,t){var n=e.length-1,i=n*t,o=Math.floor(i),a=r.Interpolation.Utils.Linear;return t<0?a(e[0],e[1],i):1<t?a(e[n],e[n-1],n-i):a(e[o],e[n<o+1?n:o+1],i-o)},Bezier:function(e,t){for(var n=0,i=e.length-1,o=Math.pow,a=r.Interpolation.Utils.Bernstein,s=0;s<=i;s++)n+=o(1-t,i-s)*o(t,s)*e[s]*a(i,s);return n},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=r.Interpolation.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:(i=[1],function(e){var t=1;if(i[e])return i[e];for(var n=e;1<n;n--)t*=n;return i[e]=t}),CatmullRom:function(e,t,n,i,o){var e=.5*(n-e),i=.5*(i-t),a=o*o;return(2*t-2*n+e+i)*(o*a)+(-3*t+3*n-2*e-i)*a+e*o+t}}},window.TWEEN=r}(),DFLIP.createBlob=function(e,t){var n;return"undefined"!=typeof Blob?new Blob([e],{type:t}):((n=new MozBlobBuilder).append(e),n.getBlob(t))},DFLIP.createObjectURL=function(){var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return function(e,t){var n;if("undefined"!=typeof URL&&URL.createObjectURL)return n=DFLIP.createBlob(e,t),URL.createObjectURL(n);for(var i="data:"+t+";base64,",o=0,a=e.length;o<a;o+=3){var s=255&e[o],r=255&e[o+1],l=255&e[o+2];i+=c[s>>2]+c[(3&s)<<4|r>>4]+c[o+1<a?(15&r)<<2|l>>6:64]+c[o+2<a?63&l:64]}return i}}(),function(){function r(e){var t=e&&e.w+"px"||"100%",n=e&&e.h+"px"||"100%",i=this.itemHeight=e.itemHeight,o=(this.items=e.items,this.generatorFn=e.generatorFn,this.totalRows=e.totalRows||e.items&&e.items.length,this.addFn=e.addFn,this.scrollFn=e.scrollFn,r.createScroller(i*this.totalRows)),a=(this.container=r.createContainer(t,n),this.container.appendChild(o),this.screenItemsLen=Math.ceil(e.h/i),this.offsetItems=this.screenItemsLen,this.cachedItemsLen=this.screenItemsLen+2*this.offsetItems,this._renderChunk(this.container,0),this);a.lastRepaintY=0,this.screenItemsLen;function s(e){var t,n=e.target.scrollTop;(!a.lastRepaintY||Math.abs(n-a.lastRepaintY)>=a.offsetItems*a.itemHeight)&&(t=parseInt(n/i,10)-a.offsetItems,a._renderChunk(a.container,t<0?0:t),a.lastRepaintY=n),a.lastScrolled=Date.now(),null!=a.scrollFn&&a.scrollFn(),e.preventDefault&&e.preventDefault()}a.dispose=function(){a.container&&a.container.parentNode&&a.container.parentNode.removeChild(a.container),a.container.removeEventListener("scroll",s)},a.container.addEventListener("scroll",s)}return r.prototype.reset=function(e){this.screenItemsLen=Math.ceil(e/this.itemHeight),this.cachedItemsLen=this.screenItemsLen+2*this.offsetItems;e=parseInt(this.lastRepaintY/this.itemHeight,10)-this.offsetItems;this.needReset=!0,this._renderChunk(this.container,Math.max(e,0))},r.prototype.createRow=function(e){var t;return this.generatorFn&&((t=this.generatorFn(e)).classList.add("df-vrow"),t.style.position="absolute",t.style.top=e*this.itemHeight+"px",t.setAttribute("index",e)),t},r.prototype._renderChunk=function(e,t){var n=null==this.range,i=(this.range=this.range||{min:0,max:this.cachedItemsLen},this.range),o=i.min,i=i.max,a=n||o<=t;if(n||t!=o||0!=this.needReset){for(var s=(s=n?o:a?i:t)>this.totalRows?this.totalRows:s<0?0:s,r=(r=t+this.cachedItemsLen)>this.totalRows?this.totalRows:r,l=s;l<r;l++)a?e.appendChild(this.createRow(l)):e.insertBefore(this.createRow(l),e.childNodes[1+l-s]),null!=this.addFn&&this.addFn(l);Math.abs(t-o);if(this.needReset=!1,!n&&e.childNodes.length>this.cachedItemsLen+1)for(var c=a?1:1+this.cachedItemsLen,d=c+(r-s);c<d;d--)e.childNodes[c]&&this.container.removeChild(e.childNodes[c]);this.range.min=t,this.range.max=r}},r.createContainer=function(e,t){var n=document.createElement("div");return n.style.width=e,n.style.height=t,n.style.overflow="auto",n.style.position="relative",n.style.padding=0,n},r.createScroller=function(e){var t=document.createElement("div");return t.style.opacity=0,t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.width="1px",t.style.height=e+"px",t},r}()),BookMarkViewer=function(){function e(e){this.outline=null,this.lastToggleIsShow=!0,this.container=e.container,this.linkService=e.linkService,this.outlineItemClass=e.outlineItemClass||"outlineItem",this.outlineToggleClass=e.outlineToggleClass||"outlineItemToggler",this.outlineToggleHiddenClass=e.outlineToggleHiddenClass||"outlineItemsHidden"}return e.prototype={dispose:function(){this.container&&this.container.parentNode&&this.container.parentNode.removeChild(this.container),this.linkService=null},reset:function(){this.outline=null,this.lastToggleIsShow=!0;for(var e=this.container;e.firstChild;)e.removeChild(e.firstChild)},_dispatchEvent:function(e){var t=document.createEvent("CustomEvent");t.initCustomEvent("outlineloaded",!0,!0,{outlineCount:e}),this.container.dispatchEvent(t)},_bindLink:function(e,t){var n=this.linkService;1==t.custom?(e.href=n.getCustomDestinationHash(t.dest),e.onclick=function(e){return n.customNavigateTo(t.dest),!1}):t.url?pdfjsLib.addLinkAttributes(e,{url:t.url}):(e.href=n.getDestinationHash(t.dest),e.onclick=function(e){return n.navigateTo(t.dest),!1})},_addToggleButton:function(t){var n=document.createElement("div");n.className=this.outlineToggleClass+" "+this.outlineToggleHiddenClass,n.onclick=function(e){e.stopPropagation(),n.classList.toggle(this.outlineToggleHiddenClass),e.shiftKey&&(e=!n.classList.contains(this.outlineToggleHiddenClass),this._toggleOutlineItem(t,e))}.bind(this),t.insertBefore(n,t.firstChild)},_toggleOutlineItem:function(e,t){this.lastToggleIsShow=t;for(var n=e.querySelectorAll("."+this.outlineToggleClass),i=0,o=n.length;i<o;++i)n[i].classList[t?"remove":"add"](this.outlineToggleHiddenClass)},toggleOutlineTree:function(){this.outline&&this._toggleOutlineItem(this.container,!this.lastToggleIsShow)},render:function(e){var e=e&&e.outline||null,t=0;if(this.outline&&this.reset(),this.outline=e){for(var e=document.createDocumentFragment(),n=[{parent:e,items:this.outline}],i=!1;0<n.length;)for(var o=n.shift(),a=o.custom,s=0,r=o.items.length;s<r;s++){var l=o.items[s],c=document.createElement("div"),d=(c.className=this.outlineItemClass,document.createElement("a"));null==l.custom&&null!=a&&(l.custom=a),this._bindLink(d,l),d.textContent=l.title.replace(/\x00/g,""),c.appendChild(d),l.items&&0<l.items.length&&(i=!0,this._addToggleButton(c),(d=document.createElement("div")).className=this.outlineItemClass+"s",c.appendChild(d),n.push({parent:d,custom:l.custom,items:l.items})),o.parent.appendChild(c),t++}i&&(null!=this.container.classList?this.container.classList.add(this.outlineItemClass+"s"):null!=this.container.className&&(this.container.className+=" picWindow")),this.container.appendChild(e),this._dispatchEvent(t)}}},e}(),DFLightBox=function(i){function e(e,t){this.duration=300;var n=this;return n.lightboxWrapper=i("<div>").addClass("df-lightbox-wrapper"),n.container=i("<div>").addClass("df-container").appendTo(n.lightboxWrapper),n.controls=i("<div>").addClass("df-lightbox-controls").appendTo(n.lightboxWrapper),n.closeButton=i("<div>").addClass("df-lightbox-close df-ui-btn").on("click",function(){n.close(e)}).appendTo(n.controls),n.lightboxWrapper.append(n.container),n}return e.prototype.show=function(e){return 0==this.lightboxWrapper.parent().length&&i("body").append(this.lightboxWrapper),i("html,body").addClass("df-lightbox-open"),this.lightboxWrapper.fadeIn(this.duration,e),this},e.prototype.close=function(e){return this.lightboxWrapper.fadeOut(this.duration),setTimeout(e,this.duration),i("html,body").removeClass("df-lightbox-open"),this},e}(jQuery),PDFLinkService=(DFLIP.Share=function(s){function e(e,t){var n=this,i="<div>",o="df-share-button",a="width=500,height=400";n.isOpen=!1,n.shareUrl="",n.wrapper=s('<div class="df-share-wrapper" style="display: none;">').on("click",function(e){n.close()}),n.box=s('<div class="df-share-box">').on("click",function(e){e.preventDefault(),e.stopPropagation()}).appendTo(n.wrapper).html('<span class="df-share-title">'+t.text.share+"</span>"),n.urlInput=s('<textarea class="df-share-url">').on("click",function(){s(this).select()}),n.facebook=s(i,{class:o+" df-share-facebook "+t.icons.facebook}).on("click",function(e){window.open("https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(n.shareUrl),"Sharer",a)}),n.google=s(i,{class:o+" df-share-google "+t.icons.google}).on("click",function(e){window.open("https://plus.google.com/share?url="+encodeURIComponent(n.shareUrl),"Sharer",a)}),n.twitter=s(i,{class:o+" df-share-twitter "+t.icons.twitter}).on("click",function(e){window.open("http://twitter.com/share?url="+encodeURIComponent(n.shareUrl),"Sharer",a)}),n.mail=s("<a>",{class:o+" df-share-mail "+t.icons.mail,href:"mailto:?subject="+t.text.mailSubject+"&body="+t.text.mailBody.replace("{{url}}",encodeURIComponent(n.shareUrl)),target:"_blank"}).on("click",function(e){s(this).attr("href","mailto:?subject="+t.text.mailSubject+"&body="+t.text.mailBody.replace("{{url}}",encodeURIComponent(n.shareUrl))),e.stopPropagation()}),n.box.append(n.urlInput).append(n.facebook).append(n.twitter).append(n.mail),s(e).append(n.wrapper)}return e.prototype.show=function(){this.wrapper.fadeIn(300),this.urlInput.val(this.shareUrl),this.urlInput.trigger("click"),this.isOpen=!0},e.prototype.dispose=function(){var e=this;e.box.off(),e.google.off(),e.twitter.off(),e.facebook.off(),e.mail.off(),e.urlInput.off(),e.wrapper.off().remove()},e.prototype.close=function(){this.wrapper.fadeOut(300),this.isOpen=!1},e.prototype.update=function(e){this.shareUrl=e},e}(jQuery),DFLIP.Popup=function(i){function e(e,t){var n=this;n.isOpen=!1,n.wrapper=i('<div class="df-popup-wrapper" style="display: none;">').on("click",function(e){n.close()}),n.box=i('<div class="df-popup-box">').on("click",function(e){e.preventDefault(),e.stopPropagation()}).appendTo(n.wrapper),i(e).append(n.wrapper)}return e.prototype.show=function(){this.wrapper.fadeIn(300),this.isOpen=!0},e.prototype.dispose=function(){this.box.off(),this.wrapper.off().remove()},e.prototype.close=function(){this.wrapper.fadeOut(300),this.isOpen=!1},e}(jQuery),function(){function e(){this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null,this._pagesRefCache=null}return e.prototype={dispose:function(){this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null,this._pagesRefCache=null},setDocument:function(e,t){this.baseUrl=t,this.pdfDocument=e,this._pagesRefCache=Object.create(null)},setViewer:function(e){this.pdfViewer=e,this.externalLinkTarget=e.previewObject.options.linkTarget},setHistory:function(e){this.pdfHistory=e},get pagesCount(){return this.pdfDocument.numPages},get page(){return this.pdfViewer.currentPageNumber},set page(e){this.pdfViewer.currentPageNumber=e},navigateTo:function(t){var i="",o=this,a=function(n){var e=n instanceof Object?o._pagesRefCache[n.num+" "+n.gen+" R"]:n+1;e?((e=o.pdfViewer.contentProvider.options.pageSize==DFLIP.PAGE_SIZE.DOUBLEINTERNAL&&2<e?2*e-1:e)>o.pdfViewer.pageCount&&(e=o.pdfViewer.pageCount),o.pdfViewer.gotoPage(e),o.pdfHistory&&o.pdfHistory.push({dest:t,hash:i,page:e})):o.pdfDocument.getPageIndex(n).then(function(e){var t=n.num+" "+n.gen+" R";o._pagesRefCache[t]=e+1,a(n)})},e="string"==typeof t?(i=t,this.pdfDocument.getDestination(t)):Promise.resolve(t);e.then(function(e){(t=e)instanceof Array&&a(e[0])})},customNavigateTo:function(e){if(""!=e&&null!=e&&"null"!=e){var t=null;if(isNaN(Math.round(e))){if("string"==typeof e&&(t=parseInt(e.replace("#",""),10),isNaN(t)))return void window.open(e,DFLIP.defaults.linkTarget==DFLIP.LINK_TARGET.SELF?"_self":"_blank")}else t=e;null!=t&&this.pdfViewer.gotoPage(t)}},getDestinationHash:function(e){if("string"==typeof e)return this.getAnchorUrl("#"+escape(e));if(e instanceof Array){var t,n,i=e[0],i=i instanceof Object?this._pagesRefCache[i.num+" "+i.gen+" R"]:i+1;if(i)return i=this.getAnchorUrl("#page="+i),"object"==typeof(t=e[1])&&"name"in t&&"XYZ"===t.name&&(t=e[4]||this.pdfViewer.currentScaleValue,i+="&zoom="+(t=(n=parseFloat(t))?100*n:t),e[2]||e[3])&&(i+=","+(e[2]||0)+","+(e[3]||0)),i}return this.getAnchorUrl("")},getCustomDestinationHash:function(e){return"#"+escape(e)},getAnchorUrl:function(e){return(this.baseUrl||"")+e},setHash:function(e){var t,n,i,o,a,s;0<=e.indexOf("=")?"nameddest"in(t=parseQueryString(e))?(this.pdfHistory&&this.pdfHistory.updateNextHashParam(t.nameddest),this.navigateTo(t.nameddest)):("page"in t&&(n=0|t.page||1),"zoom"in t&&(a=(o=t.zoom.split(","))[0],s=parseFloat(a),-1===a.indexOf("Fit")?i=[null,{name:"XYZ"},1<o.length?0|o[1]:null,2<o.length?0|o[2]:null,s?s/100:a]:"Fit"===a||"FitB"===a?i=[null,{name:a}]:"FitH"===a||"FitBH"===a||"FitV"===a||"FitBV"===a?i=[null,{name:a},1<o.length?0|o[1]:null]:"FitR"===a?5!==o.length?console.error("PDFLinkService_setHash: Not enough parameters for 'FitR'."):i=[null,{name:a},0|o[1],0|o[2],0|o[3],0|o[4]]:console.error("PDFLinkService_setHash: '"+a+"' is not a valid zoom value.")),i?this.pdfViewer.scrollPageIntoView(n||this.page,i):n&&(this.page=n),"pagemode"in t&&((s=document.createEvent("CustomEvent")).initCustomEvent("pagemode",!0,!0,{mode:t.pagemode}),this.pdfViewer.container.dispatchEvent(s))):/^\d+$/.test(e)?this.page=e:(this.pdfHistory&&this.pdfHistory.updateNextHashParam(unescape(e)),this.navigateTo(unescape(e)))},executeNamedAction:function(e){switch(e){case"GoBack":this.pdfHistory&&this.pdfHistory.back();break;case"GoForward":this.pdfHistory&&this.pdfHistory.forward();break;case"NextPage":this.page++;break;case"PrevPage":this.page--;break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}var t=document.createEvent("CustomEvent");t.initCustomEvent("namedaction",!0,!0,{action:e}),this.pdfViewer.container.dispatchEvent(t)},cachePageRef:function(e,t){t=t.num+" "+t.gen+" R";this._pagesRefCache[t]=e}},e}()),FindStates={FIND_FOUND:0,FIND_NOTFOUND:1,FIND_WRAPPED:2,FIND_PENDING:3},FIND_SCROLL_OFFSET_TOP=-50,FIND_SCROLL_OFFSET_LEFT=-400,CHARACTERS_TO_NORMALIZE={"‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"};DFLIP.PDFFindController=function(){function e(e){this.pdfViewer=e.pdfViewer||null,this.onUpdateResultsCount=null,this.onUpdateState=null,this.reset();e=Object.keys(CHARACTERS_TO_NORMALIZE).join("");this.normalizationRegex=new RegExp("["+e+"]","g")}return e.prototype={reset:function(){this.startedTextExtraction=!1,this.extractTextPromises=[],this.pendingFindMatches=Object.create(null),this.active=!1,this.pageContents=[],this.pageMatches=[],this.pageMatchesLength=null,this.matchCount=0,this.selected={pageIdx:-1,matchIdx:-1},this.offset={pageIdx:null,matchIdx:null},this.pagesToSearch=null,this.resumePageIdx=null,this.state=null,this.dirtyMatch=!1,this.findTimeout=null,this.firstPagePromise=new Promise(function(e){this.resolveFirstPage=e}.bind(this))},normalize:function(e){return e.replace(this.normalizationRegex,function(e){return CHARACTERS_TO_NORMALIZE[e]})},_prepareMatches:function(e,t,n){var i,o;for(e.sort(function(e,t){return e.match===t.match?e.matchLength-t.matchLength:e.match-t.match}),i=0,o=e.length;i<o;i++)!function(e,t){var n,i=e[t];if(t<e.length-1&&i.match===e[t+1].match)return i.skipped=!0,1;for(var o=t-1;0<=o;o--)if(!(n=e[o]).skipped){if(n.match+n.matchLength<i.match)break;if(n.match+n.matchLength>=i.match+i.matchLength)return i.skipped=!0,1}}(e,i)&&(t.push(e[i].match),n.push(e[i].matchLength))},calcFindPhraseMatch:function(e,t,n){for(var i=[],o=e.length,a=-o;-1!==(a=n.indexOf(e,a+o));)i.push(a);this.pageMatches[t]=i},calcFindWordMatch:function(e,t,n){for(var i,o,a,s=[],r=e.match(/\S+/g),l=0,c=r.length;l<c;l++)for(a=-(o=(i=r[l]).length);;){if(-1===(a=n.indexOf(i,a+o)))break;s.push({match:a,matchLength:o,skipped:!1})}this.pageMatchesLength||(this.pageMatchesLength=[]),this.pageMatchesLength[t]=[],this.pageMatches[t]=[],this._prepareMatches(s,this.pageMatches[t],this.pageMatchesLength[t])},calcFindMatch:function(e){var t=this.normalize(this.pageContents[e]),n=this.normalize(this.state.query),i=this.state.caseSensitive,o=this.state.phraseSearch;0!==n.length&&(i||(t=t.toLowerCase(),n=n.toLowerCase()),o?this.calcFindPhraseMatch(n,e,t):this.calcFindWordMatch(n,e,t),this.updatePage(e),this.resumePageIdx===e&&(this.resumePageIdx=null,this.nextPageMatch()),0<this.pageMatches[e].length)&&(this.matchCount+=this.pageMatches[e].length,this.updateUIResultsCount())},extractText:function(){if(!this.startedTextExtraction){this.startedTextExtraction=!0,this.pageContents=[];for(var r=[],e=this.pdfViewer.contentProvider.pdfDocument.numPages,t=0;t<e;t++)this.extractTextPromises.push(new Promise(function(e){r.push(e)}));var l=this;!function a(s){l.pdfViewer.getPageTextContent(s).then(function(e){for(var t=e.items,n=[],i=0,o=t.length;i<o;i++)n.push(t[i].str);l.pageContents.push(n.join("")),r[s](s),console.log("extracting Page"+s),s+1<l.pdfViewer.contentProvider.pdfDocument.numPages&&a(s+1)})}(0)}},executeCommand:function(e,t){null!==this.state&&"findagain"===e||(this.dirtyMatch=!0),this.state=t,this.updateUIState(FindStates.FIND_PENDING),this.firstPagePromise.then(function(){this.extractText(),clearTimeout(this.findTimeout),"find"===e?this.findTimeout=setTimeout(this.nextMatch.bind(this),250):this.nextMatch()}.bind(this))},updatePage:function(e){this.selected.pageIdx===e&&(this.pdfViewer.currentPageNumber=e+1);e=this.pdfViewer.getPageView(e);e.textLayer&&e.textLayer.updateMatches()},nextMatch:function(){var e=this.state.findPrevious,t=this.pdfViewer.currentPageNumber-1,n=this.pdfViewer.contentProvider.pageCount;if(this.active=!0,this.dirtyMatch){this.dirtyMatch=!1,this.selected.pageIdx=this.selected.matchIdx=-1,this.offset.pageIdx=t,this.offset.matchIdx=null,this.hadMatch=!1,this.resumePageIdx=null,this.pageMatches=[],this.matchCount=0,this.pageMatchesLength=null;for(var i=this,o=0;o<n;o++)this.updatePage(o),o in this.pendingFindMatches||(this.pendingFindMatches[o]=!0,this.extractTextPromises[o].then(function(e){delete i.pendingFindMatches[e],i.calcFindMatch(e)}))}if(""===this.state.query)this.updateUIState(FindStates.FIND_FOUND);else if(!this.resumePageIdx){t=this.offset;if(this.pagesToSearch=n,null!==t.matchIdx){var a=this.pageMatches[t.pageIdx].length;if(!e&&t.matchIdx+1<a||e&&0<t.matchIdx)return this.hadMatch=!0,t.matchIdx=e?t.matchIdx-1:t.matchIdx+1,void this.updateMatch(!0);this.advanceOffsetPage(e)}this.nextPageMatch()}},matchesReady:function(e){var t=this.offset,e=e.length,n=this.state.findPrevious;return e?(this.hadMatch=!0,t.matchIdx=n?e-1:0,this.updateMatch(!0),!0):(this.advanceOffsetPage(n),!!(t.wrapped&&(t.matchIdx=null,this.pagesToSearch<0))&&(this.updateMatch(!1),!0))},updateMatchPosition:function(e,t,n,i){this.selected.matchIdx===t&&this.selected.pageIdx===e&&scrollIntoView(n[i],{top:FIND_SCROLL_OFFSET_TOP,left:FIND_SCROLL_OFFSET_LEFT},!0)},nextPageMatch:function(){null!==this.resumePageIdx&&console.error("There can only be one pending page.");do{var e=this.offset.pageIdx,t=this.pageMatches[e];if(!t){this.resumePageIdx=e;break}}while(!this.matchesReady(t))},advanceOffsetPage:function(e){var t=this.offset,n=this.extractTextPromises.length;t.pageIdx=e?t.pageIdx-1:t.pageIdx+1,t.matchIdx=null,this.pagesToSearch--,(n<=t.pageIdx||t.pageIdx<0)&&(t.pageIdx=e?n-1:0,t.wrapped=!0)},updateMatch:function(e){var t=FindStates.FIND_NOTFOUND,n=this.offset.wrapped;this.offset.wrapped=!1,e&&(e=this.selected.pageIdx,this.selected.pageIdx=this.offset.pageIdx,this.selected.matchIdx=this.offset.matchIdx,t=n?FindStates.FIND_WRAPPED:FindStates.FIND_FOUND,-1!==e)&&e!==this.selected.pageIdx&&this.updatePage(e),this.updateUIState(t,this.state.findPrevious),-1!==this.selected.pageIdx&&this.updatePage(this.selected.pageIdx)},updateUIResultsCount:function(){this.onUpdateResultsCount&&this.onUpdateResultsCount(this.matchCount)},updateUIState:function(e,t){this.onUpdateState&&this.onUpdateState(e,t,this.matchCount)}},e}(),DFLIP.TextLayerBuilder=function(){function e(e){this.textLayerDiv=e.textLayerDiv,this.renderingDone=!1,this.divContentDone=!1,this.pageIdx=e.pageIndex,this.pageNumber=this.pageIdx+1,this.matches=[],this.viewport=e.viewport,this.textDivs=[],this.findController=e.findController||null,this.textLayerRenderTask=null,this.enhanceTextSelection=e.enhanceTextSelection,this._bindMouse()}return e.prototype={_finishRendering:function(){var e;this.renderingDone=!0,this.enhanceTextSelection||((e=document.createElement("div")).className="endOfContent",this.textLayerDiv.appendChild(e))},render:function(e){var t;this.divContentDone&&!this.renderingDone&&(this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this.textDivs=[],t=document.createDocumentFragment(),this.textLayerRenderTask=pdfjsLib.renderTextLayer({textContent:this.textContent,container:t,viewport:this.viewport,textDivs:this.textDivs,timeout:e,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then(function(){this.textLayerDiv.appendChild(t),this._finishRendering(),this.updateMatches()}.bind(this),function(e){}))},setTextContent:function(e){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this.textContent=e,this.divContentDone=!0},convertMatches:function(e,t){var n=0,i=0,o=this.textContent.items,a=o.length-1,s=null===this.findController?0:this.findController.state.query.length,r=[];if(e)for(var l=0,c=e.length;l<c;l++){for(var d=e[l];n!==a&&d>=i+o[n].str.length;)i+=o[n].str.length,n++;n===o.length&&console.error("Could not find a matching mapping");var u={begin:{divIdx:n,offset:d-i}};for(d+=t?t[l]:s;n!==a&&d>i+o[n].str.length;)i+=o[n].str.length,n++;u.end={divIdx:n,offset:d-i},r.push(u)}return r},renderMatches:function(e){if(0!==e.length){var a=this.textContent.items,s=this.textDivs,t=null,n=this.pageIdx,i=null!==this.findController&&n===this.findController.selected.pageIdx,o=null===this.findController?-1:this.findController.selected.matchIdx,r={divIdx:-1,offset:void 0},l=o,c=o+1;if(null!==this.findController&&this.findController.state.highlightAll)l=0,c=e.length;else if(!i)return;for(var d=l;d<c;d++){var u=e[d],h=u.begin,u=u.end,p=i&&d===o?" selected":"";if(this.findController&&this.findController.updateMatchPosition(n,d,s,h.divIdx),t&&h.divIdx===t.divIdx?v(t.divIdx,t.offset,h.offset):(null!==t&&v(t.divIdx,t.offset,r.offset),m(h)),h.divIdx===u.divIdx)v(h.divIdx,h.offset,u.offset,"highlight"+p);else{v(h.divIdx,h.offset,r.offset,"highlight begin"+p);for(var g=h.divIdx+1,f=u.divIdx;g<f;g++)s[g].className="highlight middle"+p;m(u,"highlight end"+p)}t=u}t&&v(t.divIdx,t.offset,r.offset)}function m(e,t){var n=e.divIdx;s[n].textContent="",v(n,0,e.offset,t)}function v(e,t,n,i){var o=s[e],e=a[e].str.substring(t,n),t=document.createTextNode(e);i?((n=document.createElement("span")).className=i,n.appendChild(t),o.appendChild(n)):o.appendChild(t)}},updateMatches:function(){if(this.renderingDone){for(var e,t,n=this.matches,i=this.textDivs,o=this.textContent.items,a=-1,s=0,r=n.length;s<r;s++){for(var l=n[s],c=Math.max(a,l.begin.divIdx),d=l.end.divIdx;c<=d;c++){var u=i[c];u.textContent=o[c].str,u.className=""}a=l.end.divIdx+1}null!==this.findController&&this.findController.active&&(null!==this.findController&&(e=this.findController.pageMatches[this.pageIdx]||null,t=this.findController.pageMatchesLength&&this.findController.pageMatchesLength[this.pageIdx]||null),this.matches=this.convertMatches(e,t),this.renderMatches(this.matches))}},_bindMouse:function(){var i=this.textLayerDiv,o=this;i.addEventListener("mousedown",function(e){var t,n;o.enhanceTextSelection&&o.textLayerRenderTask?o.textLayerRenderTask.expandTextDivs(!0):(t=i.querySelector(".endOfContent"))&&(e.target!==i&&"none"!==window.getComputedStyle(t).getPropertyValue("-moz-user-select")&&(n=i.getBoundingClientRect(),e=Math.max(0,(e.pageY-n.top)/n.height),t.style.top=(100*e).toFixed(2)+"%"),t.classList.add("active"))}),i.addEventListener("mouseup",function(e){var t;o.enhanceTextSelection&&o.textLayerRenderTask?o.textLayerRenderTask.expandTextDivs(!1):(t=i.querySelector(".endOfContent"))&&(t.style.top="",t.classList.remove("active"))})}},e}(),DFLIP.ConvertPageLinks=function(){for(var a=arguments[0]/100,s=arguments[1]/100,e=function(e,t,n,i,o){return{x:e/a,y:t/s,w:n/a,h:i/s,dest:o}},t=[],n=2;n<arguments.length;n++)t[n-2]=e.apply(this,arguments[n]);return t},DFLIP.parseLinks=function(e){var t;if(null!=e&&0<e.length)for(var n=0;n<e.length;n++)null!=(t=e[n])&&null!=t[0]&&null==t[0].dest&&(t=DFLIP.ConvertPageLinks.apply(this,t),e[n]=t);return e},function(h){function t(e){return"true"==e||1==e}function p(e){null!=e.webgl&&(e.webgl=t(e.webgl)),null!=e.enableDownload&&(e.enableDownload=t(e.enableDownload)),null!=e.search&&(e.search=t(e.search)),null!=e.enableAnalytics&&(e.enableAnalytics=t(e.enableAnalytics)),null!=e.scrollWheel&&(e.scrollWheel=t(e.scrollWheel)),null!=e.autoEnableOutline&&(e.autoEnableOutline=t(e.autoEnableOutline)),null!=e.autoEnableThumbnail&&(e.autoEnableThumbnail=t(e.autoEnableThumbnail)),null!=e.transparent&&(e.transparent=t(e.transparent)),null!=e.overwritePDFOutline&&(e.overwritePDFOutline=t(e.overwritePDFOutline)),null!=e.soundEnable&&(e.soundEnable=t(e.soundEnable)),null!=e.forceFit&&(e.forceFit=t(e.forceFit)),null!=e.enableAnnotation&&(e.enableAnnotation=t(e.enableAnnotation)),null!=e.webglShadow&&(e.webglShadow=t(e.webglShadow)),null!=e.autoPlay&&(e.autoPlay=t(e.autoPlay)),null!=e.autoPlayStart&&(e.autoPlayStart=t(e.autoPlayStart)),null!=e.paddingTop&&(e.paddingTop=parseInt(e.paddingTop,10)),null!=e.paddingRight&&(e.paddingRight=parseInt(e.paddingRight,10)),null!=e.paddingBottom&&(e.paddingBottom=parseInt(e.paddingBottom,10)),null!=e.paddingLeft&&(e.paddingLeft=parseInt(e.paddingLeft,10)),null!=e.zoomRatio&&(e.zoomRatio=parseFloat(e.zoomRatio,10)),null!=e.stiffness&&(e.stiffness=parseFloat(e.stiffness,10)),null!=e.autoPlayDuration&&(e.autoPlayDuration=parseInt(e.autoPlayDuration,10)),null!=e.linkTarget&&(e.linkTarget=parseInt(e.linkTarget,10)),0!=e.pageMode&&"0"!=e.pageMode||(e.pageMode=null),0!=e.singlePageMode&&"0"!=e.singlePageMode||(e.singlePageMode=null)}DFLIP.getOptions=function(e){var t="option_"+(e=h(e)).attr("id"),n=e.attr("source")||e.attr("df-source"),n=((t=null==t||""==t||null==window[t]?{}:window[t]).source=null==n||""==n?t.source:n,{webgl:e.attr("webgl"),height:e.attr("height"),soundEnable:e.attr("sound"),bookTitle:e.data("title"),transparent:e.attr("transparent"),enableDownload:e.attr("download"),search:e.attr("search"),duration:e.attr("duration"),hard:e.attr("hard"),openPage:e.data("page"),pageMode:e.attr("pagemode"),direction:e.attr("direction"),backgroundColor:e.attr("backgroundcolor"),scrollWheel:e.attr("scrollwheel"),backgroundImage:e.attr("backgroundimage"),paddingTop:e.attr("paddingtop"),paddingRight:e.attr("paddingright"),paddingBottom:e.attr("paddingbottom"),paddingLeft:e.attr("paddingleft"),wpOptions:e.attr("wpoptions")}),i=t=h.extend(!0,{},t,n);if(1!=i.parsed){i.parsed=!0;var o=[];if(p(i),"undefined"!=typeof dFlipWPGlobal&&"true"==i.wpOptions){try{for(var a in i.links){for(var s=i.links[a],r=[100,100],l=0;l<s.length;l++){for(var c=s[l].substr(1).slice(0,-1).split(","),d=[],u=0;u<5;u++)d[u]=c[u];r.push(d)}o[parseInt(a,10)+1]=r}}catch(i){console.error(i.stack)}i.links=DFLIP.parseLinks(o)}else i.links=DFLIP.parseLinks(i.links)}return t},DFLIP.parseBooks=function(){h("._df_button, ._df_thumb, ._df_custom, ._df_book").each(function(){var e=h(this);if("true"!==(e.attr("parsed")||e.attr("df-parsed")))if(e.attr("df-parsed","true"),e.hasClass("_df_book")){var t=e.attr("id"),n=e.attr("slug"),i=DFLIP.getOptions(e);i.id=t,null!=n&&(i.slug=n),t?window[t.toString()]=h(e).flipBook(i.source,i):h(e).flipBook(i.source,i)}else if(e.hasClass("_df_thumb")){var n=h("<div class='_df_book-cover'>"),t=e.html().trim(),i=(e.html(""),h("<span class='_df_book-title'>").html(t).appendTo(n),e.attr("thumb")||e.attr("df-thumb")),o=e.attr("thumbtype")||DFLIP.defaults.thumbElement||"div",a=e.attr("tags")||e.attr("df-tags");if(a&&0<(a=a.split(",")).length)for(var s=0;s<a.length;s++)e.append("<span class='_df_book-tag'>"+a[s]+"</span>");null!=i&&""!=i.toString().trim()?"img"==o?(n.append('<img src="'+i+'" alt="'+t+'"/>'),e.attr("thumb-type","img")):n.css({backgroundImage:"url('"+i+"')"}):n.addClass("_df_thumb-not-found"),e.append(n)}})},h(document).ready(function(){"undefined"==typeof dFlipLocation&&0!=DFLIP.autoDetectLocation&&h("script").each(function(){var e=h(this)[0].src;(-1<e.indexOf("/dflip.js")||-1<e.indexOf("/dflip.min.js"))&&(-1<e.indexOf("https://")||-1<e.indexOf("http://"))&&-1<e.indexOf("js/dflip.")&&(e=e.split("/"),window.dFlipLocation=e.slice(0,-2).join("/"))}),"undefined"!=typeof dFlipLocation&&(2<dFlipLocation.length&&"/"!==dFlipLocation.slice(-1)&&(window.dFlipLocation+="/"),DFLIP.defaults.mockupjsSrc=dFlipLocation+"js/libs/mockup.min.js",DFLIP.defaults.pdfjsSrc=dFlipLocation+"js/libs/pdf.min.js",DFLIP.defaults.pdfjsCompatibilitySrc=dFlipLocation+"js/libs/compatibility.js",DFLIP.defaults.threejsSrc=dFlipLocation+"js/libs/three.min.js",DFLIP.defaults.pdfjsWorkerSrc=dFlipLocation+"js/libs/pdf.worker.min.js",DFLIP.defaults.soundFile=dFlipLocation+"sound/turn2.mp3",DFLIP.defaults.imagesLocation=dFlipLocation+"images",DFLIP.defaults.imageResourcesPath=dFlipLocation+"images/pdfjs/",DFLIP.defaults.cMapUrl=dFlipLocation+"js/libs/cmaps/","undefined"!=typeof dFlipWPGlobal)&&(p(dFlipWPGlobal),h.extend(!0,DFLIP.defaults,dFlipWPGlobal)),DFLIP.preParseHash=window.location.hash,h("body").on("click","._df_button, ._df_thumb, ._df_custom",function(e){e.preventDefault();var n=h(this);window.dfLightBox||(window.dfLightBox=new DFLightBox(function(){Array.prototype.forEach.call(DFLIP.utils.getSharePrefixes(),function(e){0==window.location.hash.indexOf("#"+e)&&(window.location.hash="#_")}),window.dfActiveLightBoxBook.analytics({eventAction:"Book Closed",options:window.dfActiveLightBoxBook.options}),window.dfActiveLightBoxBook.dispose(),window.dfActiveLightBoxBook=null})),window.dfLightBox.duration=500,window.dfActiveLightBoxBook&&window.dfActiveLightBoxBook.dispose?window.dfActiveLightBoxBook.dispose():window.dfLightBox.show(function(){var e=DFLIP.getOptions(n),t=(e.transparent=!1,e.height="100%",e.id=n.attr("id"),n.attr("slug"));null!=t&&(e.slug=t),e.isLightBox=!0,window.dfActiveLightBoxBook=h(window.dfLightBox.container).flipBook(e.source,e)})}),(DFLIP.utils.isSafari||DFLIP.utils.isIOS)&&h("body").addClass("df-webkit");var e,i=!1;Array.prototype.forEach.call(DFLIP.utils.getSharePrefixes(),function(e){var t,n;DFLIP.preParseHash&&0<=DFLIP.preParseHash.indexOf(e)&&!1===i&&(t=DFLIP.preParseHash.split(e)[1].split("/")[0],null!=(e=DFLIP.preParseHash.split(e)[1].split("/")[1])&&(e=e.split("/")[0]),0<(n=0==(n=0==(n=h("[slug="+t+"]")).length?h("#"+t):n).length?h("[_slug="+t+"]"):n).length)&&(null!=e&&n.data("page",e),n.is("._df_button, ._df_thumb, ._df_custom"))&&(n.trigger("click"),i=!0)}),DFLIP.parseBooks(),h("body").hasClass("attachment-pdf")&&0<(e=h("[attachment_pdf_flipbook_lightbox]")).length&&h(e[0]).trigger("click"),h("body").on("click",".df-ui-sidemenu-close",function(){h(this).closest(".df-container").find(".df-ui-outline.df-active , .df-ui-thumbnail.df-active").trigger("click")})})}(jQuery);